(()=>{"use strict";const t=function(t,e,n){return{get:function(){var t=n.value.bind(this);return Object.defineProperty(this,e,{writable:!0,value:t}),t}}};var e=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},n=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},r=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},o=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};const i=function(){function i(t,e,n,r,o){this.buttons=t,this.popup=e,this.deck=n,this.dealer=r,this.player=o,this.attachButtonsHandlers(),this.init()}return i.prototype.deal=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.popup.hide(),this.buttons.disableAll(),[4,this.supplyHandWithCard(this.player)];case 1:return t.sent(),[4,this.supplyHandWithCard(this.player)];case 2:return t.sent(),[4,this.supplyHandWithCard(this.dealer)];case 3:return t.sent(),[4,this.supplyHandWithCard(this.dealer,!1)];case 4:return t.sent(),this.buttons.reset.enable(),this.checkBlackjack(),[2]}}))}))},i.prototype.reset=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.popup.hide(),this.buttons.disableAll(),this.supplyDeckWithCards(),this.dealer.empty(),this.player.empty(),[4,this.deck.shuffle()];case 1:return t.sent(),[4,this.deck.shuffle()];case 2:return t.sent(),this.buttons.deal.enable(),[2]}}))}))},i.prototype.hit=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.buttons.disableAll(),[4,this.supplyHandWithCard(this.player)];case 1:return t.sent(),this.player.hasBust()?(this.dealer.revealTopCard(),this.popup.show("You lost!"),this.buttons.reset.enable()):this.player.hasCardsLimit?this.stand():(this.buttons.reset.enable(),this.buttons.enableHitAndStand()),[2]}}))}))},i.prototype.stand=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.buttons.disableAll(),this.dealer.revealTopCard(),[4,this.supplyDealerWithCards()];case 1:return t.sent(),this.conclude(),[2]}}))}))},i.prototype.supplyHandWithCard=function(t,e){return void 0===e&&(e=!0),n(this,void 0,void 0,(function(){var n,o,i,s,a,u;return r(this,(function(r){switch(r.label){case 0:return n=this.deck.getOffsetTop(),o=n.x,i=n.y,s=t.getRect(),a=s.x,u=s.y,[4,t.push(this.deck.pop().setTransform(o-a,i-u)).drag(e)];case 1:return r.sent(),[2]}}))}))},i.prototype.checkBlackjack=function(){this.player.hasBlackjack()||this.dealer.hasBlackjack()?(this.popup.show("Blackjack!"),this.dealer.revealTopCard()):this.buttons.enableHitAndStand()},i.prototype.supplyDeckWithCards=function(){var t=this;o(o([],this.player.cards),this.dealer.cards).forEach((function(e){var n=e.getRect(),r=n.x,o=n.y,i=n.width,s=n.height,a=t.deck.getRect(),u=a.x,c=a.y;t.deck.push(e.hide().setTransform(r-u+i/2,o-c+s/2))}))},i.prototype.supplyDealerWithCards=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return!this.dealer.canDrawCard()||this.dealer.hasCardsLimit?[3,3]:[4,this.supplyHandWithCard(this.dealer)];case 1:return t.sent(),[4,this.supplyDealerWithCards()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},i.prototype.conclude=function(){var t=this.player.getScore(),e=this.dealer.getScore(),n="You lost!";this.dealer.hasBust()||t>e?n="You won!":t===e&&(n="Push!"),this.popup.show(n),this.buttons.reset.enable()},i.prototype.attachButtonsHandlers=function(){this.buttons.deal.attachHandler(this.deal),this.buttons.reset.attachHandler(this.reset),this.buttons.hit.attachHandler(this.hit),this.buttons.stand.attachHandler(this.stand)},i.prototype.init=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.deck.intro()];case 1:case 2:return t.sent(),[4,this.deck.shuffle()];case 3:return t.sent(),this.buttons.deal.enable(),[2]}}))}))},e([t],i.prototype,"deal",null),e([t],i.prototype,"reset",null),e([t],i.prototype,"hit",null),e([t],i.prototype,"stand",null),i}(),s=function(){function t(t){this.elem=t}return t.prototype.attachHandler=function(t){this.elem.onclick=t},t.prototype.disable=function(){this.elem.setAttribute("disabled","")},t.prototype.enable=function(){this.elem.removeAttribute("disabled")},t}(),a=function(){function t(t,e,n,r){this.deal=t,this.reset=e,this.hit=n,this.stand=r}return t.prototype.disableAll=function(){this.deal.disable(),this.reset.disable(),this.hit.disable(),this.stand.disable()},t.prototype.enableHitAndStand=function(){this.hit.enable(),this.stand.enable()},t}();var u=(new Map).set("ace",(function(t,e){return t<11&&e<2?11:1})).set("two",(function(){return 2})).set("three",(function(){return 3})).set("four",(function(){return 4})).set("five",(function(){return 5})).set("six",(function(){return 6})).set("seven",(function(){return 7})).set("eight",(function(){return 8})).set("nine",(function(){return 9})).set("ten",(function(){return 10})).set("jack",(function(){return 10})).set("queen",(function(){return 10})).set("king",(function(){return 10}));var c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};const l=function(t){return new Promise((function(e){var n=t.map((function(t){return c(c({},t),{hasStarted:!1,hasEnded:!1})}));requestAnimationFrame((function t(){if(n.some((function(t){return!t.hasEnded}))){var r=Date.now();n.forEach((function(t){var e,n=t.start,o=t.end,i=t.onStart,s=t.onProgress,a=t.onEnd,u=t.hasStarted;t.hasEnded||r<n||(u||(t.hasStarted=!0,null==i||i()),null==s||s((e=(r-n)/(o-n))<.5?4*Math.pow(e,3):(e-1)*(2*e-2)*(2*e-2)+1),r>o&&(t.hasEnded=!0,null==a||a()))})),requestAnimationFrame(t)}else e()}))}))},h=function(t){var e=t.delay,n=void 0===e?0:e,r=t.duration,o=void 0===r?0:r,i=t.onStart,s=t.onProgress,a=t.onEnd,u=n+Date.now();return{start:u,onStart:i,onProgress:s,onEnd:a,end:u+o}},p=function(t,e,n){return t+(e-t)*n},f=function(){function t(t){this.elem=t,this.cards=[]}return t.prototype.push=function(t){return this.cards.push(t),this.elem.append(t.elem),this},t.prototype.pop=function(){return this.cards.pop()},t.prototype.getRect=function(){return this.elem.getBoundingClientRect()},Object.defineProperty(t.prototype,"count",{get:function(){return this.cards.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topCard",{get:function(){return this.cards[this.count-1]},enumerable:!1,configurable:!0}),t}();var d,y=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.drag=function(t){return e=this,n=void 0,o=function(){var e,n,r,o,i=this;return function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(s){switch(s.label){case 0:return e=this.topCard.getTransform(),n=e.x,r=e.y,o=(3===this.count?0:this.count-3)*this.topCard.getRect().width,[4,l([h({duration:400,onProgress:function(t){i.topCard.setTransform(p(n,o,t),p(r,0,t))},onEnd:function(){t&&i.topCard.show()}})])];case 1:return s.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(t,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(s,a)}u((o=o.apply(e,n||[])).next())}));var e,n,r,o},e.prototype.empty=function(){return this.cards=[],this},e.prototype.getScore=function(){return this.cards.reduce((function(t,e,n){var r=e.rank;return t+u.get(r)(t,n)}),0)},e.prototype.hasBlackjack=function(){return 21===this.getScore()&&2===this.count},e.prototype.hasBust=function(){return this.getScore()>21},Object.defineProperty(e.prototype,"hasCardsLimit",{get:function(){return 5===this.count},enumerable:!1,configurable:!0}),e}(f);var v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.revealTopCard=function(){var t;null===(t=this.topCard)||void 0===t||t.show()},e.prototype.canDrawCard=function(){return this.getScore()<17},e}(b),g=function(){function t(t,e,n){void 0===n&&(n=0),this.elem=document.createElement("div"),this.backClassName="card back",this.rank=t;var r=-n/4;this.setTransform(r,r).foreground=n,this.faceClassName="card "+t+"-of-"+e,this.className=this.backClassName}return t.prototype.show=function(){return this.className=this.faceClassName,this},t.prototype.hide=function(){return this.className=this.backClassName,this},t.prototype.setTransform=function(t,e){return this.styles.transform="translate("+t+"px, "+e+"px)",this},t.prototype.getTransform=function(){return t=this.elem,e=getComputedStyle(t).transform.replace(/[^\d\-.,]/g,"").split(","),n=e[4],r=e[5],{x:Number(n)||0,y:Number(r)||0};var t,e,n,r},t.prototype.getRect=function(){return this.elem.getBoundingClientRect()},Object.defineProperty(t.prototype,"className",{set:function(t){this.elem.className=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"foreground",{set:function(t){this.styles.zIndex=t.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{set:function(t){this.styles.opacity=t.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.elem.style},enumerable:!1,configurable:!0}),t}();var m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},C=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};const x=function(t){function e(e,n,r){var o=t.call(this,e)||this;return n.forEach((function(t){r.forEach((function(e){var n=-o.count/4,r=new g(e,t,o.count).show().setTransform(n,-200+n);r.opacity=0,o.push(r)}))})),o}return m(e,t),e.prototype.intro=function(){return k(this,void 0,void 0,(function(){return C(this,(function(t){switch(t.label){case 0:return[4,l(this.cards.map((function(t,e){var n=t.getTransform(),r=n.x,o=n.y,i=-e/4;return h({delay:8*e,duration:600,onProgress:function(e){t.setTransform(p(r,i,e),p(o,i,e)).opacity=p(0,1,e)},onEnd:function(){t.hide()}})})))];case 1:return t.sent(),[2]}}))}))},e.prototype.shuffle=function(){return k(this,void 0,void 0,(function(){var t,e,n;return C(this,(function(r){switch(r.label){case 0:for(t=this.count-1;t;t-=1)e=Math.floor(Math.random()*(t+1)),n=[this.cards[e],this.cards[t]],this.cards[t]=n[0],this.cards[e]=n[1];return[4,l(this.cards.reduce((function(t,e,n){var r=2*n,o=e.getTransform(),i=o.x,s=o.y,a=-n/4,u=(2*Math.round(Math.random())-1)*(Math.random()*e.getRect().width/2+30);return t.push(h({delay:r,duration:200,onProgress:function(t){e.setTransform(p(i,u,t),p(s,a,t))}}),h({duration:200,delay:r+200,onStart:function(){e.foreground=n},onProgress:function(t){e.setTransform(p(u,a,t),a)}})),t}),[]))];case 1:return r.sent(),[2]}}))}))},e.prototype.getOffsetTop=function(){var t=this.getRect(),e=t.x,n=t.y,r=this.topCard.getTransform();return{x:e+r.x,y:n+r.y}},e}(f),O=function(){function t(t){this.elem=t}return t.prototype.show=function(t){var e=this;l([h({duration:100,onStart:function(){e.elem.textContent=t},onProgress:function(t){e.opacity=p(0,1,t)},onEnd:function(){e.opacity=""}})])},t.prototype.hide=function(){var t=this;"0"!==this.styles.opacity&&l([h({duration:200,onProgress:function(e){t.opacity=p(1,0,e)},onEnd:function(){t.opacity=0}})])},Object.defineProperty(t.prototype,"styles",{get:function(){return this.elem.style},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{set:function(t){this.styles.opacity=t.toString()},enumerable:!1,configurable:!0}),t}();var P=function(t){return document.getElementById(t)};new i(new a(new s(P("deal-btn")),new s(P("reset-btn")),new s(P("hit-btn")),new s(P("stand-btn"))),new O(P("popup")),new x(P("deck"),["clubs","spades","hearts","diamonds"],["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]),new w(P("dealer")),new b(P("player")))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy91dGlscy9iaW5kLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL2JsYWNramFjay50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9idXR0b25zL2J1dHRvbi50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9idXR0b25zL2J1dHRvbnMudHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvY29uc3RhbnRzL3JhbmtzLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL3V0aWxzL2FuaW1hdGUudHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvdXRpbHMvZWFzZUFuaW1hdGlvbi50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy91dGlscy9jcmVhdGVBbmltYXRpb24udHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvdXRpbHMvZ2V0QW5pbWF0aW9uU3RlcC50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9jYXJkSG9sZGVycy9jYXJkU3RhY2sudHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvY2FyZEhvbGRlcnMvaGFuZC50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9jYXJkSG9sZGVycy9kZWFsZXIudHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvY2FyZC50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy91dGlscy9nZXRUcmFuc2Zvcm1WYWx1ZS50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9jYXJkSG9sZGVycy9kZWNrLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL3BvcHVwLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL2luZGV4LnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL2NvbnN0YW50cy9zdWl0cy50cyJdLCJuYW1lcyI6WyJ0YXJnZXQiLCJwcm9wTmFtZSIsImRlc2NyaXB0b3IiLCJnZXQiLCJ2YWx1ZSIsImJpbmQiLCJ0aGlzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ3cml0YWJsZSIsImJ1dHRvbnMiLCJwb3B1cCIsImRlY2siLCJkZWFsZXIiLCJwbGF5ZXIiLCJhdHRhY2hCdXR0b25zSGFuZGxlcnMiLCJpbml0IiwiZGVhbCIsImhpZGUiLCJkaXNhYmxlQWxsIiwic3VwcGx5SGFuZFdpdGhDYXJkIiwicmVzZXQiLCJlbmFibGUiLCJjaGVja0JsYWNramFjayIsInN1cHBseURlY2tXaXRoQ2FyZHMiLCJlbXB0eSIsInNodWZmbGUiLCJoaXQiLCJoYXNCdXN0IiwicmV2ZWFsVG9wQ2FyZCIsInNob3ciLCJoYXNDYXJkc0xpbWl0Iiwic3RhbmQiLCJlbmFibGVIaXRBbmRTdGFuZCIsInN1cHBseURlYWxlcldpdGhDYXJkcyIsImNvbmNsdWRlIiwiaGFuZCIsInNob3VsZFNob3dGYWNlIiwiZ2V0T2Zmc2V0VG9wIiwieCIsInkiLCJnZXRSZWN0IiwiZHgiLCJkeSIsInB1c2giLCJwb3AiLCJzZXRUcmFuc2Zvcm0iLCJkcmFnIiwiaGFzQmxhY2tqYWNrIiwiY2FyZHMiLCJmb3JFYWNoIiwiY2FyZCIsIndpZHRoIiwiaGVpZ2h0IiwiY2FuRHJhd0NhcmQiLCJwbGF5ZXJTY29yZSIsImdldFNjb3JlIiwiZGVhbGVyU2NvcmUiLCJ0ZXh0IiwiYXR0YWNoSGFuZGxlciIsImludHJvIiwiZWxlbSIsImNhbGxiYWNrIiwib25jbGljayIsImRpc2FibGUiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJyYW5rVmFsdWUiLCJNYXAiLCJzZXQiLCJzY29yZSIsImluZGV4IiwiYW5pbWF0aW9ucyIsIlByb21pc2UiLCJyZXNvbHZlIiwiYW5pbWF0aW9uc1dpdGhGbGFncyIsIm1hcCIsImFuaW1hdGlvbiIsImhhc1N0YXJ0ZWQiLCJoYXNFbmRlZCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImYiLCJzb21lIiwibm93IiwiRGF0ZSIsInByb2dyZXNzIiwic3RhcnQiLCJlbmQiLCJvblN0YXJ0Iiwib25Qcm9ncmVzcyIsIm9uRW5kIiwiZGVsYXkiLCJkdXJhdGlvbiIsImZyb20iLCJ0byIsImFwcGVuZCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlbmd0aCIsImNvdW50IiwidG9wQ2FyZCIsImdldFRyYW5zZm9ybSIsInByIiwicmVkdWNlIiwicmFuayIsInN1aXQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJiYWNrQ2xhc3NOYW1lIiwib2Zmc2V0IiwiZm9yZWdyb3VuZCIsImZhY2VDbGFzc05hbWUiLCJjbGFzc05hbWUiLCJzdHlsZXMiLCJ0cmFuc2Zvcm0iLCJnZXRDb21wdXRlZFN0eWxlIiwicmVwbGFjZSIsInNwbGl0IiwiTnVtYmVyIiwiekluZGV4IiwidG9TdHJpbmciLCJvcGFjaXR5Iiwic3R5bGUiLCJzdWl0cyIsInJhbmtzIiwibGFzdEluZGV4IiwicmFuZG9tSW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21PZmZzZXQiLCJyb3VuZCIsInRleHRDb250ZW50IiwiZ2V0RWxlbSIsImlkIiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJtQkFpQkEsUUFqQmEsU0FDWEEsRUFDQUMsRUFDQUMsR0FDRyxPQUNIQyxJQUFHLFdBQ0QsSUFBTUMsRUFBUUYsRUFBV0UsTUFBTUMsS0FBS0MsTUFPcEMsT0FMQUMsT0FBT0MsZUFBZUYsS0FBTUwsRUFBVSxDQUNwQ1EsVUFBVSxFQUNWTCxNQUFLLElBR0FBLEsseXVEQ3FJWCxRQTFJQSxXQUNFLFdBQ1VNLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEdBSkEsS0FBQUosVUFDQSxLQUFBQyxRQUNBLEtBQUFDLE9BQ0EsS0FB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QVksc0JBQU8sQyxJQUFuQixTQUFvQkQsR0FDbEJsSCxLQUFLMEcsT0FBT1EsUUFBVUEsRUFBUUQsWSxnQ0FFbEMsRUEzQ0EsR0NRQSxJQUFNYSxFQUFVLFNBQXdCQyxHQUN0QyxPQUFBNUIsU0FBUzZCLGVBQWVELElBRzFCLElBQUksRUFDRixJQUFJLEVBQ0YsSUFBSSxFQUFPRCxFQUEyQixhQUN0QyxJQUFJLEVBQU9BLEVBQTJCLGNBQ3RDLElBQUksRUFBT0EsRUFBMkIsWUFDdEMsSUFBSSxFQUFPQSxFQUEyQixlQUV4QyxJQUFJLEVBQU1BLEVBQXdCLFVBQ2xDLElBQUksRUFBS0EsRUFBd0IsUUNoQmQsQ0FBQyxRQUFELDhCYlNBLEMsNkZZUW5CLElBQUksRUFBT0EsRUFBd0IsV0FDbkMsSUFBSSxFQUFLQSxFQUF3QixhIiwiZmlsZSI6ImpzL2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGJpbmQgPSAoXG4gIHRhcmdldDogdW5rbm93bixcbiAgcHJvcE5hbWU6IHN0cmluZyxcbiAgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yXG4pID0+ICh7XG4gIGdldCgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGRlc2NyaXB0b3IudmFsdWUuYmluZCh0aGlzKTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBwcm9wTmFtZSwge1xuICAgICAgd3JpdGFibGU6IHRydWUsIC8vIG5lZWRlZCBmb3IgamVzdCdzIHNweSB0byB3b3JrIHByb3Blcmx5O1xuICAgICAgdmFsdWUsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYmluZDtcbiIsImltcG9ydCBCdXR0b25zIGZyb20gJ2J1dHRvbnMvYnV0dG9ucyc7XG5pbXBvcnQgRGVhbGVyIGZyb20gJ2NhcmRIb2xkZXJzL2RlYWxlcic7XG5pbXBvcnQgRGVjayBmcm9tICdjYXJkSG9sZGVycy9kZWNrJztcbmltcG9ydCBIYW5kIGZyb20gJ2NhcmRIb2xkZXJzL2hhbmQnO1xuaW1wb3J0IFBvcHVwVGV4dCBmcm9tICdjb25zdGFudHMvcG9wdXBUZXh0JztcbmltcG9ydCBQb3B1cCBmcm9tICdwb3B1cCc7XG5pbXBvcnQgYmluZCBmcm9tICd1dGlscy9iaW5kJztcblxuY2xhc3MgQmxhY2tqYWNrIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBidXR0b25zOiBCdXR0b25zLFxuICAgIHByaXZhdGUgcG9wdXA6IFBvcHVwLFxuICAgIHByaXZhdGUgZGVjazogRGVjayxcbiAgICBwcml2YXRlIGRlYWxlcjogRGVhbGVyLFxuICAgIHByaXZhdGUgcGxheWVyOiBIYW5kXG4gICkge1xuICAgIHRoaXMuYXR0YWNoQnV0dG9uc0hhbmRsZXJzKCk7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBAYmluZFxuICBwcml2YXRlIGFzeW5jIGRlYWwoKSB7XG4gICAgdGhpcy5wb3B1cC5oaWRlKCk7XG4gICAgdGhpcy5idXR0b25zLmRpc2FibGVBbGwoKTtcblxuICAgIGF3YWl0IHRoaXMuc3VwcGx5SGFuZFdpdGhDYXJkKHRoaXMucGxheWVyKTtcbiAgICBhd2FpdCB0aGlzLnN1cHBseUhhbmRXaXRoQ2FyZCh0aGlzLnBsYXllcik7XG4gICAgYXdhaXQgdGhpcy5zdXBwbHlIYW5kV2l0aENhcmQodGhpcy5kZWFsZXIpO1xuICAgIGF3YWl0IHRoaXMuc3VwcGx5SGFuZFdpdGhDYXJkKHRoaXMuZGVhbGVyLCBmYWxzZSk7XG5cbiAgICB0aGlzLmJ1dHRvbnMucmVzZXQuZW5hYmxlKCk7XG5cbiAgICB0aGlzLmNoZWNrQmxhY2tqYWNrKCk7XG4gIH1cblxuICBAYmluZFxuICBwcml2YXRlIGFzeW5jIHJlc2V0KCkge1xuICAgIHRoaXMucG9wdXAuaGlkZSgpO1xuICAgIHRoaXMuYnV0dG9ucy5kaXNhYmxlQWxsKCk7XG5cbiAgICB0aGlzLnN1cHBseURlY2tXaXRoQ2FyZHMoKTtcblxuICAgIHRoaXMuZGVhbGVyLmVtcHR5KCk7XG4gICAgdGhpcy5wbGF5ZXIuZW1wdHkoKTtcblxuICAgIGF3YWl0IHRoaXMuZGVjay5zaHVmZmxlKCk7XG4gICAgYXdhaXQgdGhpcy5kZWNrLnNodWZmbGUoKTtcblxuICAgIHRoaXMuYnV0dG9ucy5kZWFsLmVuYWJsZSgpO1xuICB9XG5cbiAgQGJpbmRcbiAgcHJpdmF0ZSBhc3luYyBoaXQoKSB7XG4gICAgdGhpcy5idXR0b25zLmRpc2FibGVBbGwoKTtcblxuICAgIGF3YWl0IHRoaXMuc3VwcGx5SGFuZFdpdGhDYXJkKHRoaXMucGxheWVyKTtcblxuICAgIGlmICh0aGlzLnBsYXllci5oYXNCdXN0KCkpIHtcbiAgICAgIHRoaXMuZGVhbGVyLnJldmVhbFRvcENhcmQoKTtcbiAgICAgIHRoaXMucG9wdXAuc2hvdyhQb3B1cFRleHQuUGxheWVyRGVmZWF0KTtcbiAgICAgIHRoaXMuYnV0dG9ucy5yZXNldC5lbmFibGUoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucGxheWVyLmhhc0NhcmRzTGltaXQpIHtcbiAgICAgIHRoaXMuc3RhbmQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5idXR0b25zLnJlc2V0LmVuYWJsZSgpO1xuICAgICAgdGhpcy5idXR0b25zLmVuYWJsZUhpdEFuZFN0YW5kKCk7XG4gICAgfVxuICB9XG5cbiAgQGJpbmRcbiAgcHJpdmF0ZSBhc3luYyBzdGFuZCgpIHtcbiAgICB0aGlzLmJ1dHRvbnMuZGlzYWJsZUFsbCgpO1xuICAgIHRoaXMuZGVhbGVyLnJldmVhbFRvcENhcmQoKTtcblxuICAgIGF3YWl0IHRoaXMuc3VwcGx5RGVhbGVyV2l0aENhcmRzKCk7XG5cbiAgICB0aGlzLmNvbmNsdWRlKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1cHBseUhhbmRXaXRoQ2FyZChoYW5kOiBIYW5kLCBzaG91bGRTaG93RmFjZSA9IHRydWUpIHtcbiAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMuZGVjay5nZXRPZmZzZXRUb3AoKTtcbiAgICBjb25zdCB7IHg6IGR4LCB5OiBkeSB9ID0gaGFuZC5nZXRSZWN0KCk7XG5cbiAgICBhd2FpdCBoYW5kXG4gICAgICAucHVzaCh0aGlzLmRlY2sucG9wKCkuc2V0VHJhbnNmb3JtKHggLSBkeCwgeSAtIGR5KSlcbiAgICAgIC5kcmFnKHNob3VsZFNob3dGYWNlKTtcbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tCbGFja2phY2soKSB7XG4gICAgaWYgKHRoaXMucGxheWVyLmhhc0JsYWNramFjaygpIHx8IHRoaXMuZGVhbGVyLmhhc0JsYWNramFjaygpKSB7XG4gICAgICB0aGlzLnBvcHVwLnNob3coUG9wdXBUZXh0LkJsYWNramFjayk7XG4gICAgICB0aGlzLmRlYWxlci5yZXZlYWxUb3BDYXJkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnV0dG9ucy5lbmFibGVIaXRBbmRTdGFuZCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3VwcGx5RGVja1dpdGhDYXJkcygpIHtcbiAgICBbLi4udGhpcy5wbGF5ZXIuY2FyZHMsIC4uLnRoaXMuZGVhbGVyLmNhcmRzXS5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICBjb25zdCB7IHgsIHksIHdpZHRoLCBoZWlnaHQgfSA9IGNhcmQuZ2V0UmVjdCgpO1xuICAgICAgY29uc3QgeyB4OiBkeCwgeTogZHkgfSA9IHRoaXMuZGVjay5nZXRSZWN0KCk7XG5cbiAgICAgIHRoaXMuZGVjay5wdXNoKFxuICAgICAgICBjYXJkLmhpZGUoKS5zZXRUcmFuc2Zvcm0oeCAtIGR4ICsgd2lkdGggLyAyLCB5IC0gZHkgKyBoZWlnaHQgLyAyKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3VwcGx5RGVhbGVyV2l0aENhcmRzKCkge1xuICAgIGlmICh0aGlzLmRlYWxlci5jYW5EcmF3Q2FyZCgpICYmICF0aGlzLmRlYWxlci5oYXNDYXJkc0xpbWl0KSB7XG4gICAgICBhd2FpdCB0aGlzLnN1cHBseUhhbmRXaXRoQ2FyZCh0aGlzLmRlYWxlcik7XG4gICAgICBhd2FpdCB0aGlzLnN1cHBseURlYWxlcldpdGhDYXJkcygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY29uY2x1ZGUoKSB7XG4gICAgY29uc3QgcGxheWVyU2NvcmUgPSB0aGlzLnBsYXllci5nZXRTY29yZSgpO1xuICAgIGNvbnN0IGRlYWxlclNjb3JlID0gdGhpcy5kZWFsZXIuZ2V0U2NvcmUoKTtcbiAgICBsZXQgdGV4dCA9IFBvcHVwVGV4dC5QbGF5ZXJEZWZlYXQ7XG5cbiAgICBpZiAodGhpcy5kZWFsZXIuaGFzQnVzdCgpIHx8IHBsYXllclNjb3JlID4gZGVhbGVyU2NvcmUpIHtcbiAgICAgIHRleHQgPSBQb3B1cFRleHQuUGxheWVyVmljdG9yeTtcbiAgICB9IGVsc2UgaWYgKHBsYXllclNjb3JlID09PSBkZWFsZXJTY29yZSkge1xuICAgICAgdGV4dCA9IFBvcHVwVGV4dC5QdXNoO1xuICAgIH1cblxuICAgIHRoaXMucG9wdXAuc2hvdyh0ZXh0KTtcbiAgICB0aGlzLmJ1dHRvbnMucmVzZXQuZW5hYmxlKCk7XG4gIH1cblxuICBwcml2YXRlIGF0dGFjaEJ1dHRvbnNIYW5kbGVycygpIHtcbiAgICB0aGlzLmJ1dHRvbnMuZGVhbC5hdHRhY2hIYW5kbGVyKHRoaXMuZGVhbCk7XG4gICAgdGhpcy5idXR0b25zLnJlc2V0LmF0dGFjaEhhbmRsZXIodGhpcy5yZXNldCk7XG4gICAgdGhpcy5idXR0b25zLmhpdC5hdHRhY2hIYW5kbGVyKHRoaXMuaGl0KTtcbiAgICB0aGlzLmJ1dHRvbnMuc3RhbmQuYXR0YWNoSGFuZGxlcih0aGlzLnN0YW5kKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaW5pdCgpIHtcbiAgICBhd2FpdCB0aGlzLmRlY2suaW50cm8oKTtcbiAgICBhd2FpdCB0aGlzLmRlY2suc2h1ZmZsZSgpO1xuICAgIGF3YWl0IHRoaXMuZGVjay5zaHVmZmxlKCk7XG5cbiAgICB0aGlzLmJ1dHRvbnMuZGVhbC5lbmFibGUoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCbGFja2phY2s7XG4iLCJjbGFzcyBCdXR0b24ge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW06IEhUTUxCdXR0b25FbGVtZW50KSB7fVxuXG4gIGF0dGFjaEhhbmRsZXIoY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcbiAgICB0aGlzLmVsZW0ub25jbGljayA9IGNhbGxiYWNrO1xuICB9XG5cbiAgZGlzYWJsZSgpIHtcbiAgICB0aGlzLmVsZW0uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICcnKTtcbiAgfVxuXG4gIGVuYWJsZSgpIHtcbiAgICB0aGlzLmVsZW0ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJ1dHRvbjtcbiIsImltcG9ydCBCdXR0b24gZnJvbSAnLi9idXR0b24nO1xuXG5jbGFzcyBCdXR0b25zIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGRlYWw6IEJ1dHRvbixcbiAgICBwdWJsaWMgcmVzZXQ6IEJ1dHRvbixcbiAgICBwdWJsaWMgaGl0OiBCdXR0b24sXG4gICAgcHVibGljIHN0YW5kOiBCdXR0b25cbiAgKSB7fVxuXG4gIGRpc2FibGVBbGwoKSB7XG4gICAgdGhpcy5kZWFsLmRpc2FibGUoKTtcbiAgICB0aGlzLnJlc2V0LmRpc2FibGUoKTtcbiAgICB0aGlzLmhpdC5kaXNhYmxlKCk7XG4gICAgdGhpcy5zdGFuZC5kaXNhYmxlKCk7XG4gIH1cblxuICBlbmFibGVIaXRBbmRTdGFuZCgpIHtcbiAgICB0aGlzLmhpdC5lbmFibGUoKTtcbiAgICB0aGlzLnN0YW5kLmVuYWJsZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJ1dHRvbnM7XG4iLCIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2hhZG93XG5jb25zdCBlbnVtIFJhbmsge1xuICBBY2UgPSAnYWNlJyxcbiAgVHdvID0gJ3R3bycsXG4gIFRocmVlID0gJ3RocmVlJyxcbiAgRm91ciA9ICdmb3VyJyxcbiAgRml2ZSA9ICdmaXZlJyxcbiAgU2l4ID0gJ3NpeCcsXG4gIFNldmVuID0gJ3NldmVuJyxcbiAgRWlnaHQgPSAnZWlnaHQnLFxuICBOaW5lID0gJ25pbmUnLFxuICBUZW4gPSAndGVuJyxcbiAgSmFjayA9ICdqYWNrJyxcbiAgUXVlZW4gPSAncXVlZW4nLFxuICBLaW5nID0gJ2tpbmcnLFxufVxuXG5leHBvcnQgY29uc3QgcmFua3MgPSBbXG4gIFJhbmsuQWNlLFxuICBSYW5rLlR3byxcbiAgUmFuay5UaHJlZSxcbiAgUmFuay5Gb3VyLFxuICBSYW5rLkZpdmUsXG4gIFJhbmsuU2l4LFxuICBSYW5rLlNldmVuLFxuICBSYW5rLkVpZ2h0LFxuICBSYW5rLk5pbmUsXG4gIFJhbmsuVGVuLFxuICBSYW5rLkphY2ssXG4gIFJhbmsuUXVlZW4sXG4gIFJhbmsuS2luZyxcbl07XG5cbmV4cG9ydCBjb25zdCByYW5rVmFsdWUgPSBuZXcgTWFwPFxuICBSYW5rLFxuICAoc2NvcmU/OiBudW1iZXIsIGluZGV4PzogbnVtYmVyKSA9PiBudW1iZXJcbj4oKVxuICAuc2V0KFJhbmsuQWNlLCAoc2NvcmUsIGluZGV4KSA9PiAoc2NvcmUgPCAxMSAmJiBpbmRleCA8IDIgPyAxMSA6IDEpKVxuICAuc2V0KFJhbmsuVHdvLCAoKSA9PiAyKVxuICAuc2V0KFJhbmsuVGhyZWUsICgpID0+IDMpXG4gIC5zZXQoUmFuay5Gb3VyLCAoKSA9PiA0KVxuICAuc2V0KFJhbmsuRml2ZSwgKCkgPT4gNSlcbiAgLnNldChSYW5rLlNpeCwgKCkgPT4gNilcbiAgLnNldChSYW5rLlNldmVuLCAoKSA9PiA3KVxuICAuc2V0KFJhbmsuRWlnaHQsICgpID0+IDgpXG4gIC5zZXQoUmFuay5OaW5lLCAoKSA9PiA5KVxuICAuc2V0KFJhbmsuVGVuLCAoKSA9PiAxMClcbiAgLnNldChSYW5rLkphY2ssICgpID0+IDEwKVxuICAuc2V0KFJhbmsuUXVlZW4sICgpID0+IDEwKVxuICAuc2V0KFJhbmsuS2luZywgKCkgPT4gMTApO1xuXG5leHBvcnQgZGVmYXVsdCBSYW5rO1xuIiwiaW1wb3J0IGVhc2VBbmltYXRpb24gZnJvbSAnLi9lYXNlQW5pbWF0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBBbmltYXRpb24ge1xuICBzdGFydDogbnVtYmVyO1xuICBlbmQ6IG51bWJlcjtcbiAgb25TdGFydD86ICgpID0+IHZvaWQ7XG4gIG9uUHJvZ3Jlc3M/OiAocHJvZ3Jlc3M6IG51bWJlcikgPT4gdm9pZDtcbiAgb25FbmQ/OiAoKSA9PiB2b2lkO1xufVxuXG5jb25zdCBhbmltYXRlID0gKGFuaW1hdGlvbnM6IEFuaW1hdGlvbltdKSA9PlxuICBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgIGNvbnN0IGFuaW1hdGlvbnNXaXRoRmxhZ3MgPSBhbmltYXRpb25zLm1hcCgoYW5pbWF0aW9uKSA9PiAoe1xuICAgICAgLi4uYW5pbWF0aW9uLFxuICAgICAgaGFzU3RhcnRlZDogZmFsc2UsXG4gICAgICBoYXNFbmRlZDogZmFsc2UsXG4gICAgfSkpO1xuXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIGYoKSB7XG4gICAgICBjb25zdCBoYXZlQWxsRW5kZWQgPSAhYW5pbWF0aW9uc1dpdGhGbGFncy5zb21lKFxuICAgICAgICAoeyBoYXNFbmRlZCB9KSA9PiAhaGFzRW5kZWRcbiAgICAgICk7XG5cbiAgICAgIGlmIChoYXZlQWxsRW5kZWQpIHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICAgIGFuaW1hdGlvbnNXaXRoRmxhZ3MuZm9yRWFjaCgoYW5pbWF0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgc3RhcnQsIGVuZCwgb25TdGFydCwgb25Qcm9ncmVzcywgb25FbmQsIGhhc1N0YXJ0ZWQsIGhhc0VuZGVkIH0gPVxuICAgICAgICAgIGFuaW1hdGlvbjtcblxuICAgICAgICBpZiAoaGFzRW5kZWQgfHwgbm93IDwgc3RhcnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWhhc1N0YXJ0ZWQpIHtcbiAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuICAgICAgICAgIGFuaW1hdGlvbi5oYXNTdGFydGVkID0gdHJ1ZTtcblxuICAgICAgICAgIG9uU3RhcnQ/LigpO1xuICAgICAgICB9XG5cbiAgICAgICAgb25Qcm9ncmVzcz8uKGVhc2VBbmltYXRpb24oKG5vdyAtIHN0YXJ0KSAvIChlbmQgLSBzdGFydCkpKTtcblxuICAgICAgICBpZiAobm93ID4gZW5kKSB7XG4gICAgICAgICAgYW5pbWF0aW9uLmhhc0VuZGVkID0gdHJ1ZTtcblxuICAgICAgICAgIG9uRW5kPy4oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmKTtcbiAgICB9KTtcbiAgfSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFuaW1hdGU7XG4iLCJjb25zdCBlYXNlQW5pbWF0aW9uID0gKHByb2dyZXNzOiBudW1iZXIpID0+XG4gIHByb2dyZXNzIDwgMC41XG4gICAgPyA0ICogcHJvZ3Jlc3MgKiogM1xuICAgIDogKHByb2dyZXNzIC0gMSkgKiAoMiAqIHByb2dyZXNzIC0gMikgKiAoMiAqIHByb2dyZXNzIC0gMikgKyAxO1xuXG5leHBvcnQgZGVmYXVsdCBlYXNlQW5pbWF0aW9uO1xuIiwiaW50ZXJmYWNlIEFuaW1hdGlvblBhcmFtcyB7XG4gIGRlbGF5PzogbnVtYmVyO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgb25TdGFydD86ICgpID0+IHZvaWQ7XG4gIG9uUHJvZ3Jlc3M/OiAocHJvZ3Jlc3M6IG51bWJlcikgPT4gdm9pZDtcbiAgb25FbmQ/OiAoKSA9PiB2b2lkO1xufVxuXG5jb25zdCBjcmVhdGVBbmltYXRpb24gPSAoe1xuICBkZWxheSA9IDAsXG4gIGR1cmF0aW9uID0gMCxcbiAgb25TdGFydCxcbiAgb25Qcm9ncmVzcyxcbiAgb25FbmQsXG59OiBBbmltYXRpb25QYXJhbXMpID0+IHtcbiAgY29uc3Qgc3RhcnQgPSBkZWxheSArIERhdGUubm93KCk7XG5cbiAgcmV0dXJuIHsgc3RhcnQsIG9uU3RhcnQsIG9uUHJvZ3Jlc3MsIG9uRW5kLCBlbmQ6IHN0YXJ0ICsgZHVyYXRpb24gfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUFuaW1hdGlvbjtcbiIsImNvbnN0IGdldEFuaW1hdGlvblN0ZXAgPSAoZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyLCBwcm9ncmVzczogbnVtYmVyKSA9PlxuICBmcm9tICsgKHRvIC0gZnJvbSkgKiBwcm9ncmVzcztcblxuZXhwb3J0IGRlZmF1bHQgZ2V0QW5pbWF0aW9uU3RlcDtcbiIsImltcG9ydCBDYXJkIGZyb20gJ2NhcmQnO1xuXG5hYnN0cmFjdCBjbGFzcyBDYXJkU3RhY2sge1xuICBjYXJkczogQ2FyZFtdID0gW107XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtOiBIVE1MRGl2RWxlbWVudCkge31cblxuICBwdXNoKGNhcmQ6IENhcmQpIHtcbiAgICB0aGlzLmNhcmRzLnB1c2goY2FyZCk7XG4gICAgdGhpcy5lbGVtLmFwcGVuZChjYXJkLmVsZW0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwb3AoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FyZHMucG9wKCk7XG4gIH1cblxuICBnZXRSZWN0KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIH1cblxuICBnZXQgY291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FyZHMubGVuZ3RoO1xuICB9XG5cbiAgZ2V0IHRvcENhcmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FyZHNbdGhpcy5jb3VudCAtIDFdO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmRTdGFjaztcbiIsImltcG9ydCB7IHJhbmtWYWx1ZSB9IGZyb20gJ2NvbnN0YW50cy9yYW5rcyc7XG5pbXBvcnQgYW5pbWF0ZSBmcm9tICd1dGlscy9hbmltYXRlJztcbmltcG9ydCBjcmVhdGVBbmltYXRpb24gZnJvbSAndXRpbHMvY3JlYXRlQW5pbWF0aW9uJztcbmltcG9ydCBnZXRBbmltYXRpb25TdGVwIGZyb20gJ3V0aWxzL2dldEFuaW1hdGlvblN0ZXAnO1xuXG5pbXBvcnQgQ2FyZFN0YWNrIGZyb20gJy4vY2FyZFN0YWNrJztcblxuY29uc3QgVE9QX1NDT1JFID0gMjE7XG5cbmNsYXNzIEhhbmQgZXh0ZW5kcyBDYXJkU3RhY2sge1xuICBhc3luYyBkcmFnKHNob3VsZFNob3dGYWNlPzogYm9vbGVhbikge1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy50b3BDYXJkLmdldFRyYW5zZm9ybSgpO1xuICAgIGNvbnN0IGR4ID1cbiAgICAgICh0aGlzLmNvdW50ID09PSAzID8gMCA6IHRoaXMuY291bnQgLSAzKSAqIHRoaXMudG9wQ2FyZC5nZXRSZWN0KCkud2lkdGg7XG5cbiAgICBhd2FpdCBhbmltYXRlKFtcbiAgICAgIGNyZWF0ZUFuaW1hdGlvbih7XG4gICAgICAgIGR1cmF0aW9uOiA0MDAsXG4gICAgICAgIG9uUHJvZ3Jlc3M6IChwcikgPT4ge1xuICAgICAgICAgIHRoaXMudG9wQ2FyZC5zZXRUcmFuc2Zvcm0oXG4gICAgICAgICAgICBnZXRBbmltYXRpb25TdGVwKHgsIGR4LCBwciksXG4gICAgICAgICAgICBnZXRBbmltYXRpb25TdGVwKHksIDAsIHByKVxuICAgICAgICAgICk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRW5kOiAoKSA9PiB7XG4gICAgICAgICAgaWYgKHNob3VsZFNob3dGYWNlKSB7XG4gICAgICAgICAgICB0aGlzLnRvcENhcmQuc2hvdygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgIF0pO1xuICB9XG5cbiAgZW1wdHkoKSB7XG4gICAgdGhpcy5jYXJkcyA9IFtdO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRTY29yZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jYXJkcy5yZWR1Y2UoXG4gICAgICAoc2NvcmUsIHsgcmFuayB9LCBpbmRleCkgPT4gc2NvcmUgKyByYW5rVmFsdWUuZ2V0KHJhbmspKHNjb3JlLCBpbmRleCksXG4gICAgICAwXG4gICAgKTtcbiAgfVxuXG4gIGhhc0JsYWNramFjaygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTY29yZSgpID09PSBUT1BfU0NPUkUgJiYgdGhpcy5jb3VudCA9PT0gMjtcbiAgfVxuXG4gIGhhc0J1c3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2NvcmUoKSA+IFRPUF9TQ09SRTtcbiAgfVxuXG4gIGdldCBoYXNDYXJkc0xpbWl0KCkge1xuICAgIHJldHVybiB0aGlzLmNvdW50ID09PSA1O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhhbmQ7XG4iLCJpbXBvcnQgSGFuZCBmcm9tICcuL2hhbmQnO1xuXG5jbGFzcyBEZWFsZXIgZXh0ZW5kcyBIYW5kIHtcbiAgcmV2ZWFsVG9wQ2FyZCgpIHtcbiAgICB0aGlzLnRvcENhcmQ/LnNob3coKTtcbiAgfVxuXG4gIGNhbkRyYXdDYXJkKCkge1xuICAgIHJldHVybiB0aGlzLmdldFNjb3JlKCkgPCAxNztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEZWFsZXI7XG4iLCJpbXBvcnQgUmFuayBmcm9tICdjb25zdGFudHMvcmFua3MnO1xuaW1wb3J0IFN1aXQgZnJvbSAnY29uc3RhbnRzL3N1aXRzJztcbmltcG9ydCBnZXRUcmFuc2Zvcm1WYWx1ZSBmcm9tICd1dGlscy9nZXRUcmFuc2Zvcm1WYWx1ZSc7XG5cbmNsYXNzIENhcmQge1xuICBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgcmFuazogUmFuaztcblxuICBwcml2YXRlIGJhY2tDbGFzc05hbWUgPSAnY2FyZCBiYWNrJztcblxuICBwcml2YXRlIGZhY2VDbGFzc05hbWU6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihyYW5rOiBSYW5rLCBzdWl0OiBTdWl0LCBpbmRleCA9IDApIHtcbiAgICB0aGlzLnJhbmsgPSByYW5rO1xuXG4gICAgY29uc3Qgb2Zmc2V0ID0gLWluZGV4IC8gNDtcblxuICAgIHRoaXMuc2V0VHJhbnNmb3JtKG9mZnNldCwgb2Zmc2V0KS5mb3JlZ3JvdW5kID0gaW5kZXg7XG5cbiAgICB0aGlzLmZhY2VDbGFzc05hbWUgPSBgY2FyZCAke3Jhbmt9LW9mLSR7c3VpdH1gO1xuICAgIHRoaXMuY2xhc3NOYW1lID0gdGhpcy5iYWNrQ2xhc3NOYW1lO1xuICB9XG5cbiAgc2hvdygpIHtcbiAgICB0aGlzLmNsYXNzTmFtZSA9IHRoaXMuZmFjZUNsYXNzTmFtZTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgaGlkZSgpIHtcbiAgICB0aGlzLmNsYXNzTmFtZSA9IHRoaXMuYmFja0NsYXNzTmFtZTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc2V0VHJhbnNmb3JtKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgdGhpcy5zdHlsZXMudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3h9cHgsICR7eX1weClgO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBnZXRUcmFuc2Zvcm0oKSB7XG4gICAgcmV0dXJuIGdldFRyYW5zZm9ybVZhbHVlKHRoaXMuZWxlbSk7XG4gIH1cblxuICBnZXRSZWN0KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIH1cblxuICBwcml2YXRlIHNldCBjbGFzc05hbWUoY2xhc3NOYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLmVsZW0uY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICB9XG5cbiAgc2V0IGZvcmVncm91bmQoekluZGV4OiBudW1iZXIpIHtcbiAgICB0aGlzLnN0eWxlcy56SW5kZXggPSB6SW5kZXgudG9TdHJpbmcoKTtcbiAgfVxuXG4gIHNldCBvcGFjaXR5KG9wYWNpdHk6IG51bWJlcikge1xuICAgIHRoaXMuc3R5bGVzLm9wYWNpdHkgPSBvcGFjaXR5LnRvU3RyaW5nKCk7XG4gIH1cblxuICBwcml2YXRlIGdldCBzdHlsZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbS5zdHlsZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiY29uc3QgZ2V0VHJhbnNmb3JtVmFsdWUgPSAoZWxlbTogSFRNTEVsZW1lbnQpID0+IHtcbiAgY29uc3QgWywgLCAsICwgeCwgeV0gPSBnZXRDb21wdXRlZFN0eWxlKGVsZW0pXG4gICAgLnRyYW5zZm9ybS5yZXBsYWNlKC9bXlxcZFxcLS4sXS9nLCAnJylcbiAgICAuc3BsaXQoJywnKTtcblxuICByZXR1cm4geyB4OiBOdW1iZXIoeCkgfHwgMCwgeTogTnVtYmVyKHkpIHx8IDAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdldFRyYW5zZm9ybVZhbHVlO1xuIiwiaW1wb3J0IENhcmQgZnJvbSAnY2FyZCc7XG5pbXBvcnQgUmFuayBmcm9tICdjb25zdGFudHMvcmFua3MnO1xuaW1wb3J0IFN1aXQgZnJvbSAnY29uc3RhbnRzL3N1aXRzJztcbmltcG9ydCBhbmltYXRlIGZyb20gJ3V0aWxzL2FuaW1hdGUnO1xuaW1wb3J0IGNyZWF0ZUFuaW1hdGlvbiBmcm9tICd1dGlscy9jcmVhdGVBbmltYXRpb24nO1xuaW1wb3J0IGdldEFuaW1hdGlvblN0ZXAgZnJvbSAndXRpbHMvZ2V0QW5pbWF0aW9uU3RlcCc7XG5cbmltcG9ydCBDYXJkU3RhY2sgZnJvbSAnLi9jYXJkU3RhY2snO1xuXG5jbGFzcyBEZWNrIGV4dGVuZHMgQ2FyZFN0YWNrIHtcbiAgY29uc3RydWN0b3IoZWxlbTogSFRNTERpdkVsZW1lbnQsIHN1aXRzOiBTdWl0W10sIHJhbmtzOiBSYW5rW10pIHtcbiAgICBzdXBlcihlbGVtKTtcblxuICAgIHN1aXRzLmZvckVhY2goKHN1aXQpID0+IHtcbiAgICAgIHJhbmtzLmZvckVhY2goKHJhbmspID0+IHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gLXRoaXMuY291bnQgLyA0O1xuICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQocmFuaywgc3VpdCwgdGhpcy5jb3VudClcbiAgICAgICAgICAuc2hvdygpXG4gICAgICAgICAgLnNldFRyYW5zZm9ybShvZmZzZXQsIC0yMDAgKyBvZmZzZXQpO1xuXG4gICAgICAgIGNhcmQub3BhY2l0eSA9IDA7XG5cbiAgICAgICAgdGhpcy5wdXNoKGNhcmQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBpbnRybygpIHtcbiAgICBhd2FpdCBhbmltYXRlKFxuICAgICAgdGhpcy5jYXJkcy5tYXAoKGNhcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gY2FyZC5nZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gLWluZGV4IC8gNDtcblxuICAgICAgICByZXR1cm4gY3JlYXRlQW5pbWF0aW9uKHtcbiAgICAgICAgICBkZWxheTogaW5kZXggKiA4LFxuICAgICAgICAgIGR1cmF0aW9uOiA2MDAsXG4gICAgICAgICAgb25Qcm9ncmVzczogKHByKSA9PiB7XG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuICAgICAgICAgICAgY2FyZC5zZXRUcmFuc2Zvcm0oXG4gICAgICAgICAgICAgIGdldEFuaW1hdGlvblN0ZXAoeCwgb2Zmc2V0LCBwciksXG4gICAgICAgICAgICAgIGdldEFuaW1hdGlvblN0ZXAoeSwgb2Zmc2V0LCBwcilcbiAgICAgICAgICAgICkub3BhY2l0eSA9IGdldEFuaW1hdGlvblN0ZXAoMCwgMSwgcHIpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25FbmQ6ICgpID0+IHtcbiAgICAgICAgICAgIGNhcmQuaGlkZSgpO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgc2h1ZmZsZSgpIHtcbiAgICBmb3IgKGxldCBsYXN0SW5kZXggPSB0aGlzLmNvdW50IC0gMTsgbGFzdEluZGV4OyBsYXN0SW5kZXggLT0gMSkge1xuICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobGFzdEluZGV4ICsgMSkpO1xuXG4gICAgICBbdGhpcy5jYXJkc1tsYXN0SW5kZXhdLCB0aGlzLmNhcmRzW3JhbmRvbUluZGV4XV0gPSBbXG4gICAgICAgIHRoaXMuY2FyZHNbcmFuZG9tSW5kZXhdLFxuICAgICAgICB0aGlzLmNhcmRzW2xhc3RJbmRleF0sXG4gICAgICBdO1xuICAgIH1cblxuICAgIGF3YWl0IGFuaW1hdGUoXG4gICAgICB0aGlzLmNhcmRzLnJlZHVjZSgoYW5pbWF0aW9ucywgY2FyZCwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgZGVsYXkgPSBpbmRleCAqIDI7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gMjAwO1xuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IGNhcmQuZ2V0VHJhbnNmb3JtKCk7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IC1pbmRleCAvIDQ7XG4gICAgICAgIGNvbnN0IHJhbmRvbU9mZnNldCA9XG4gICAgICAgICAgKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSkgKiAyIC0gMSkgKlxuICAgICAgICAgICgoTWF0aC5yYW5kb20oKSAqIGNhcmQuZ2V0UmVjdCgpLndpZHRoKSAvIDIgKyAzMCk7XG5cbiAgICAgICAgYW5pbWF0aW9ucy5wdXNoKFxuICAgICAgICAgIGNyZWF0ZUFuaW1hdGlvbih7XG4gICAgICAgICAgICBkZWxheSxcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgb25Qcm9ncmVzczogKHByKSA9PiB7XG4gICAgICAgICAgICAgIGNhcmQuc2V0VHJhbnNmb3JtKFxuICAgICAgICAgICAgICAgIGdldEFuaW1hdGlvblN0ZXAoeCwgcmFuZG9tT2Zmc2V0LCBwciksXG4gICAgICAgICAgICAgICAgZ2V0QW5pbWF0aW9uU3RlcCh5LCBvZmZzZXQsIHByKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBjcmVhdGVBbmltYXRpb24oe1xuICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICBkZWxheTogZGVsYXkgKyBkdXJhdGlvbixcbiAgICAgICAgICAgIG9uU3RhcnQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgY2FyZC5mb3JlZ3JvdW5kID0gaW5kZXg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Qcm9ncmVzczogKHByKSA9PiB7XG4gICAgICAgICAgICAgIGNhcmQuc2V0VHJhbnNmb3JtKFxuICAgICAgICAgICAgICAgIGdldEFuaW1hdGlvblN0ZXAocmFuZG9tT2Zmc2V0LCBvZmZzZXQsIHByKSxcbiAgICAgICAgICAgICAgICBvZmZzZXRcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gYW5pbWF0aW9ucztcbiAgICAgIH0sIFtdKVxuICAgICk7XG4gIH1cblxuICBnZXRPZmZzZXRUb3AoKSB7XG4gICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLmdldFJlY3QoKTtcbiAgICBjb25zdCB7IHg6IGR4LCB5OiBkeSB9ID0gdGhpcy50b3BDYXJkLmdldFRyYW5zZm9ybSgpO1xuXG4gICAgcmV0dXJuIHsgeDogeCArIGR4LCB5OiB5ICsgZHkgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEZWNrO1xuIiwiaW1wb3J0IGFuaW1hdGUgZnJvbSAndXRpbHMvYW5pbWF0ZSc7XG5pbXBvcnQgY3JlYXRlQW5pbWF0aW9uIGZyb20gJ3V0aWxzL2NyZWF0ZUFuaW1hdGlvbic7XG5pbXBvcnQgZ2V0QW5pbWF0aW9uU3RlcCBmcm9tICd1dGlscy9nZXRBbmltYXRpb25TdGVwJztcblxuY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW06IEhUTUxEaXZFbGVtZW50KSB7fVxuXG4gIHNob3codGV4dDogc3RyaW5nKSB7XG4gICAgYW5pbWF0ZShbXG4gICAgICBjcmVhdGVBbmltYXRpb24oe1xuICAgICAgICBkdXJhdGlvbjogMTAwLFxuICAgICAgICBvblN0YXJ0OiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5lbGVtLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgfSxcbiAgICAgICAgb25Qcm9ncmVzczogKHByb2dyZXNzKSA9PiB7XG4gICAgICAgICAgdGhpcy5vcGFjaXR5ID0gZ2V0QW5pbWF0aW9uU3RlcCgwLCAxLCBwcm9ncmVzcyk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRW5kOiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5vcGFjaXR5ID0gJyc7XG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICBdKTtcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgaWYgKHRoaXMuc3R5bGVzLm9wYWNpdHkgIT09ICcwJykge1xuICAgICAgYW5pbWF0ZShbXG4gICAgICAgIGNyZWF0ZUFuaW1hdGlvbih7XG4gICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICBvblByb2dyZXNzOiAocHJvZ3Jlc3MpID0+IHtcbiAgICAgICAgICAgIHRoaXMub3BhY2l0eSA9IGdldEFuaW1hdGlvblN0ZXAoMSwgMCwgcHJvZ3Jlc3MpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25FbmQ6ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub3BhY2l0eSA9IDA7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICBdKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldCBzdHlsZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbS5zdHlsZTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0IG9wYWNpdHkob3BhY2l0eTogbnVtYmVyIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5zdHlsZXMub3BhY2l0eSA9IG9wYWNpdHkudG9TdHJpbmcoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcbiIsImltcG9ydCAnc3R5bGVzL2luZGV4LnNjc3MnO1xuXG5pbXBvcnQgQmxhY2tqYWNrIGZyb20gJ2JsYWNramFjayc7XG5pbXBvcnQgQnV0dG9uIGZyb20gJ2J1dHRvbnMvYnV0dG9uJztcbmltcG9ydCBCdXR0b25zIGZyb20gJ2J1dHRvbnMvYnV0dG9ucyc7XG5pbXBvcnQgRGVhbGVyIGZyb20gJ2NhcmRIb2xkZXJzL2RlYWxlcic7XG5pbXBvcnQgRGVjayBmcm9tICdjYXJkSG9sZGVycy9kZWNrJztcbmltcG9ydCBIYW5kIGZyb20gJ2NhcmRIb2xkZXJzL2hhbmQnO1xuaW1wb3J0IHsgcmFua3MgfSBmcm9tICdjb25zdGFudHMvcmFua3MnO1xuaW1wb3J0IHsgc3VpdHMgfSBmcm9tICdjb25zdGFudHMvc3VpdHMnO1xuaW1wb3J0IFBvcHVwIGZyb20gJ3BvcHVwJztcblxuY29uc3QgZ2V0RWxlbSA9IDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KGlkOiBzdHJpbmcpID0+XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSBhcyBUO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3XG5uZXcgQmxhY2tqYWNrKFxuICBuZXcgQnV0dG9ucyhcbiAgICBuZXcgQnV0dG9uKGdldEVsZW08SFRNTEJ1dHRvbkVsZW1lbnQ+KCdkZWFsLWJ0bicpKSxcbiAgICBuZXcgQnV0dG9uKGdldEVsZW08SFRNTEJ1dHRvbkVsZW1lbnQ+KCdyZXNldC1idG4nKSksXG4gICAgbmV3IEJ1dHRvbihnZXRFbGVtPEhUTUxCdXR0b25FbGVtZW50PignaGl0LWJ0bicpKSxcbiAgICBuZXcgQnV0dG9uKGdldEVsZW08SFRNTEJ1dHRvbkVsZW1lbnQ+KCdzdGFuZC1idG4nKSlcbiAgKSxcbiAgbmV3IFBvcHVwKGdldEVsZW08SFRNTERpdkVsZW1lbnQ+KCdwb3B1cCcpKSxcbiAgbmV3IERlY2soZ2V0RWxlbTxIVE1MRGl2RWxlbWVudD4oJ2RlY2snKSwgc3VpdHMsIHJhbmtzKSxcbiAgbmV3IERlYWxlcihnZXRFbGVtPEhUTUxEaXZFbGVtZW50PignZGVhbGVyJykpLFxuICBuZXcgSGFuZChnZXRFbGVtPEhUTUxEaXZFbGVtZW50PigncGxheWVyJykpXG4pO1xuIiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNoYWRvd1xuY29uc3QgZW51bSBTdWl0IHtcbiAgQ2x1YnMgPSAnY2x1YnMnLFxuICBTcGFkZXMgPSAnc3BhZGVzJyxcbiAgSGVhcnRzID0gJ2hlYXJ0cycsXG4gIERpYW1vbmRzID0gJ2RpYW1vbmRzJyxcbn1cblxuZXhwb3J0IGNvbnN0IHN1aXRzID0gW1N1aXQuQ2x1YnMsIFN1aXQuU3BhZGVzLCBTdWl0LkhlYXJ0cywgU3VpdC5EaWFtb25kc107XG5cbmV4cG9ydCBkZWZhdWx0IFN1aXQ7XG4iXSwic291cmNlUm9vdCI6IiJ9