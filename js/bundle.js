(()=>{"use strict";const t=function(t,e,n){return{get:function(){var t=n.value.bind(this);return Object.defineProperty(this,e,{writable:!0,value:t}),t}}};var e=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},n=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},r=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},o=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};const i=function(){function i(t,e,n,r,o){this.buttons=t,this.popup=e,this.deck=n,this.dealer=r,this.player=o,this.attachButtonsHandlers(),this.init()}return i.prototype.deal=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.popup.hide(),this.buttons.disableAll(),[4,this.supplyHandWithCard(this.player)];case 1:return t.sent(),[4,this.supplyHandWithCard(this.player)];case 2:return t.sent(),[4,this.supplyHandWithCard(this.dealer)];case 3:return t.sent(),[4,this.supplyHandWithCard(this.dealer,!1)];case 4:return t.sent(),this.buttons.reset.enable(),this.checkBlackjack(),[2]}}))}))},i.prototype.reset=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.popup.hide(),this.buttons.disableAll(),this.supplyDeckWithCards(),this.dealer.empty(),this.player.empty(),[4,this.deck.shuffle()];case 1:return t.sent(),[4,this.deck.shuffle()];case 2:return t.sent(),this.buttons.deal.enable(),[2]}}))}))},i.prototype.hit=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.buttons.disableAll(),[4,this.supplyHandWithCard(this.player)];case 1:return t.sent(),this.player.hasBust()?(this.dealer.revealTopCard(),this.popup.show("You lost!"),this.buttons.reset.enable()):this.player.hasCardsLimit?this.stand():(this.buttons.reset.enable(),this.buttons.enableHitAndStand()),[2]}}))}))},i.prototype.stand=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.buttons.disableAll(),this.dealer.revealTopCard(),[4,this.supplyDealerWithCards()];case 1:return t.sent(),this.conclude(),[2]}}))}))},i.prototype.supplyHandWithCard=function(t,e){return void 0===e&&(e=!0),n(this,void 0,void 0,(function(){var n,o,i,s,a,u;return r(this,(function(r){switch(r.label){case 0:return n=this.deck.getOffsetTop(),o=n.x,i=n.y,s=t.getRect(),a=s.x,u=s.y,[4,t.push(this.deck.pop().setTransform(o-a,i-u)).drag(e)];case 1:return r.sent(),[2]}}))}))},i.prototype.checkBlackjack=function(){this.player.hasBlackjack()||this.dealer.hasBlackjack()?(this.popup.show("Blackjack!"),this.dealer.revealTopCard()):this.buttons.enableHitAndStand()},i.prototype.supplyDeckWithCards=function(){var t=this;o(o([],this.player.cards),this.dealer.cards).forEach((function(e){var n=e.getRect(),r=n.x,o=n.y,i=n.width,s=n.height,a=t.deck.getRect(),u=a.x,c=a.y;t.deck.push(e.hide().setTransform(r-u+i/2,o-c+s/2))}))},i.prototype.supplyDealerWithCards=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return!this.dealer.canDrawCard()||this.dealer.hasCardsLimit?[3,3]:[4,this.supplyHandWithCard(this.dealer)];case 1:return t.sent(),[4,this.supplyDealerWithCards()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},i.prototype.conclude=function(){var t=this.player.getScore(),e=this.dealer.getScore(),n="You lost!";this.dealer.hasBust()||t>e?n="You won!":t===e&&(n="Push!"),this.popup.show(n),this.buttons.reset.enable()},i.prototype.attachButtonsHandlers=function(){this.buttons.deal.attachHandler(this.deal),this.buttons.reset.attachHandler(this.reset),this.buttons.hit.attachHandler(this.hit),this.buttons.stand.attachHandler(this.stand)},i.prototype.init=function(){n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.deck.intro()];case 1:case 2:return t.sent(),[4,this.deck.shuffle()];case 3:return t.sent(),this.buttons.deal.enable(),[2]}}))}))},e([t],i.prototype,"deal",null),e([t],i.prototype,"reset",null),e([t],i.prototype,"hit",null),e([t],i.prototype,"stand",null),i}(),s=function(){function t(t){this.elem=t}return t.prototype.attachHandler=function(t){this.elem.onclick=t},t.prototype.disable=function(){this.elem.setAttribute("disabled","")},t.prototype.enable=function(){this.elem.removeAttribute("disabled")},t}(),a=function(){function t(t,e,n,r){this.deal=t,this.reset=e,this.hit=n,this.stand=r}return t.prototype.disableAll=function(){this.deal.disable(),this.reset.disable(),this.hit.disable(),this.stand.disable()},t.prototype.enableHitAndStand=function(){this.hit.enable(),this.stand.enable()},t}();var u=(new Map).set("ace",(function(t,e){return t<11&&e<2?11:1})).set("two",(function(){return 2})).set("three",(function(){return 3})).set("four",(function(){return 4})).set("five",(function(){return 5})).set("six",(function(){return 6})).set("seven",(function(){return 7})).set("eight",(function(){return 8})).set("nine",(function(){return 9})).set("ten",(function(){return 10})).set("jack",(function(){return 10})).set("queen",(function(){return 10})).set("king",(function(){return 10}));var c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};const l=function(t){return new Promise((function(e){var n=t.map((function(t){return c(c({},t),{hasStarted:!1,hasEnded:!1})}));requestAnimationFrame((function t(){if(n.some((function(t){return!t.hasEnded}))){var r=Date.now();n.forEach((function(t){var e,n=t.start,o=t.end,i=t.onStart,s=t.onProgress,a=t.onEnd,u=t.hasStarted;t.hasEnded||r<n||(u||(t.hasStarted=!0,null==i||i()),null==s||s((e=(r-n)/(o-n))<.5?4*Math.pow(e,3):(e-1)*(2*e-2)*(2*e-2)+1),r>o&&(t.hasEnded=!0,null==a||a()))})),requestAnimationFrame(t)}else e()}))}))},h=function(t){var e=t.delay,n=void 0===e?0:e,r=t.duration,o=void 0===r?0:r,i=t.onStart,s=t.onProgress,a=t.onEnd,u=n+Date.now();return{start:u,onStart:i,onProgress:s,onEnd:a,end:u+o}},p=function(t,e,n){return t+(e-t)*n},f=function(){function t(t){this.elem=t,this.cards=[]}return t.prototype.push=function(t){return this.cards.push(t),this.elem.append(t.elem),this},t.prototype.pop=function(){return this.cards.pop()},t.prototype.getRect=function(){return this.elem.getBoundingClientRect()},Object.defineProperty(t.prototype,"count",{get:function(){return this.cards.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topCard",{get:function(){return this.cards[this.count-1]},enumerable:!1,configurable:!0}),t}();var d,y=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.drag=function(t){return e=this,n=void 0,o=function(){var e,n,r,o,i=this;return function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(s){switch(s.label){case 0:return e=this.topCard.getTransform(),n=e.x,r=e.y,o=(3===this.count?0:this.count-3)*this.topCard.getRect().width,[4,l([h({duration:400,onProgress:function(t){i.topCard.setTransform(p(n,o,t),p(r,0,t))},onEnd:function(){t&&i.topCard.show()}})])];case 1:return s.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(t,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(s,a)}u((o=o.apply(e,n||[])).next())}));var e,n,r,o},e.prototype.empty=function(){return this.cards=[],this},e.prototype.getScore=function(){return this.cards.reduce((function(t,e,n){var r=e.rank;return t+u.get(r)(t,n)}),0)},e.prototype.hasBlackjack=function(){return 21===this.getScore()&&2===this.count},e.prototype.hasBust=function(){return this.getScore()>21},Object.defineProperty(e.prototype,"hasCardsLimit",{get:function(){return 5===this.count},enumerable:!1,configurable:!0}),e}(f);var v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.revealTopCard=function(){var t;null===(t=this.topCard)||void 0===t||t.show()},e.prototype.canDrawCard=function(){return this.getScore()<17},e}(b),g=function(){function t(t,e,n){void 0===n&&(n=0),this.elem=document.createElement("div"),this.backClassName="card back",this.rank=t;var r=-n/4;this.setTransform(r,r).foreground=n,this.faceClassName="card "+t+"-of-"+e,this.className=this.backClassName}return t.prototype.show=function(){return this.className=this.faceClassName,this},t.prototype.hide=function(){return this.className=this.backClassName,this},t.prototype.setTransform=function(t,e){return this.styles.transform="translate("+t+"px, "+e+"px)",this},t.prototype.getTransform=function(){return t=this.elem,e=getComputedStyle(t).transform.replace(/[^\d\-.,]/g,"").split(","),n=e[4],r=e[5],{x:Number(n)||0,y:Number(r)||0};var t,e,n,r},t.prototype.getRect=function(){return this.elem.getBoundingClientRect()},Object.defineProperty(t.prototype,"className",{set:function(t){this.elem.className=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"foreground",{set:function(t){this.styles.zIndex=t.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{set:function(t){this.styles.opacity=t.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.elem.style},enumerable:!1,configurable:!0}),t}();var m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},C=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};const x=function(t){function e(e,n,r){var o=t.call(this,e)||this;return n.forEach((function(t){r.forEach((function(e){var n=-o.count/4,r=new g(e,t,o.count).show().setTransform(n,-200+n);r.opacity=0,o.push(r)}))})),o}return m(e,t),e.prototype.intro=function(){return k(this,void 0,void 0,(function(){return C(this,(function(t){switch(t.label){case 0:return[4,l(this.cards.map((function(t,e){var n=t.getTransform(),r=n.x,o=n.y,i=-e/4;return h({delay:8*e,duration:600,onProgress:function(e){t.setTransform(p(r,i,e),p(o,i,e)).opacity=p(0,1,e)},onEnd:function(){t.hide()}})})))];case 1:return t.sent(),[2]}}))}))},e.prototype.shuffle=function(){return k(this,void 0,void 0,(function(){var t,e,n;return C(this,(function(r){switch(r.label){case 0:for(t=this.count-1;t;t-=1)e=Math.floor(Math.random()*(t+1)),n=[this.cards[e],this.cards[t]],this.cards[t]=n[0],this.cards[e]=n[1];return[4,l(this.cards.reduce((function(t,e,n){var r=2*n,o=e.getTransform(),i=o.x,s=o.y,a=-n/4,u=(2*Math.round(Math.random())-1)*(Math.random()*e.getRect().width/2+30);return t.push(h({delay:r,duration:200,onProgress:function(t){e.setTransform(p(i,u,t),p(s,a,t))}}),h({duration:200,delay:r+200,onStart:function(){e.foreground=n},onProgress:function(t){e.setTransform(p(u,a,t),a)}})),t}),[]))];case 1:return r.sent(),[2]}}))}))},e.prototype.getOffsetTop=function(){var t=this.getRect(),e=t.x,n=t.y,r=this.topCard.getTransform();return{x:e+r.x,y:n+r.y}},e}(f),O=function(){function t(t){this.elem=t}return t.prototype.show=function(t){var e=this;l([h({duration:100,onStart:function(){e.elem.textContent=t},onProgress:function(t){e.opacity=p(0,1,t)},onEnd:function(){e.opacity=""}})])},t.prototype.hide=function(){var t=this;"0"!==this.styles.opacity&&l([h({duration:200,onProgress:function(e){t.opacity=p(1,0,e)},onEnd:function(){t.opacity=0}})])},Object.defineProperty(t.prototype,"styles",{get:function(){return this.elem.style},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{set:function(t){this.styles.opacity=t.toString()},enumerable:!1,configurable:!0}),t}();var P=function(t){return document.getElementById(t)};new i(new a(new s(P("deal-btn")),new s(P("reset-btn")),new s(P("hit-btn")),new s(P("stand-btn"))),new O(P("popup")),new x(P("deck"),["clubs","spades","hearts","diamonds"],["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]),new w(P("dealer")),new b(P("player")))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy91dGlscy9iaW5kLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL2JsYWNramFjay50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9idXR0b25zL2J1dHRvbi50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9idXR0b25zL2J1dHRvbnMudHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvY29uc3RhbnRzL3JhbmtzLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL3V0aWxzL2FuaW1hdGUudHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvdXRpbHMvZWFzZUFuaW1hdGlvbi50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy91dGlscy9jcmVhdGVBbmltYXRpb24udHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvdXRpbHMvZ2V0QW5pbWF0aW9uU3RlcC50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9jYXJkSG9sZGVycy9jYXJkU3RhY2sudHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvY2FyZEhvbGRlcnMvaGFuZC50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9jYXJkSG9sZGVycy9kZWFsZXIudHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvY2FyZC50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy91dGlscy9nZXRUcmFuc2Zvcm1WYWx1ZS50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9jYXJkSG9sZGVycy9kZWNrLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL3BvcHVwLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL2luZGV4LnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL2NvbnN0YW50cy9zdWl0cy50cyJdLCJuYW1lcyI6WyJ0YXJnZXQiLCJwcm9wTmFtZSIsImRlc2NyaXB0b3IiLCJnZXQiLCJ2YWx1ZSIsImJpbmQiLCJ0aGlzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ3cml0YWJsZSIsImJ1dHRvbnMiLCJwb3B1cCIsImRlY2siLCJkZWFsZXIiLCJwbGF5ZXIiLCJhdHRhY2hCdXR0b25zSGFuZGxlcnMiLCJpbml0IiwiZGVhbCIsImhpZGUiLCJkaXNhYmxlQWxsIiwic3VwcGx5SGFuZFdpdGhDYXJkIiwicmVzZXQiLCJlbmFibGUiLCJjaGVja0JsYWNramFjayIsInN1cHBseURlY2tXaXRoQ2FyZHMiLCJlbXB0eSIsInNodWZmbGUiLCJoaXQiLCJoYXNCdXN0IiwicmV2ZWFsVG9wQ2FyZCIsInNob3ciLCJoYXNDYXJkc0xpbWl0Iiwic3RhbmQiLCJlbmFibGVIaXRBbmRTdGFuZCIsInN1cHBseURlYWxlcldpdGhDYXJkcyIsImNvbmNsdWRlIiwiaGFuZCIsInNob3VsZFNob3dGYWNlIiwiZ2V0T2Zmc2V0VG9wIiwieCIsInkiLCJnZXRSZWN0IiwiZHgiLCJkeSIsInB1c2giLCJwb3AiLCJzZXRUcmFuc2Zvcm0iLCJkcmFnIiwiaGFzQmxhY2tqYWNrIiwiY2FyZHMiLCJmb3JFYWNoIiwiY2FyZCIsIndpZHRoIiwiaGVpZ2h0IiwiY2FuRHJhd0NhcmQiLCJwbGF5ZXJTY29yZSIsImdldFNjb3JlIiwiZGVhbGVyU2NvcmUiLCJ0ZXh0IiwiYXR0YWNoSGFuZGxlciIsImludHJvIiwiZWxlbSIsImNhbGxiYWNrIiwib25jbGljayIsImRpc2FibGUiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJyYW5rVmFsdWUiLCJNYXAiLCJzZXQiLCJzY29yZSIsImluZGV4IiwiYW5pbWF0aW9ucyIsIlByb21pc2UiLCJyZXNvbHZlIiwiYW5pbWF0aW9uc1dpdGhGbGFncyIsIm1hcCIsImFuaW1hdGlvbiIsImhhc1N0YXJ0ZWQiLCJoYXNFbmRlZCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImYiLCJzb21lIiwibm93IiwiRGF0ZSIsInByb2dyZXNzIiwic3RhcnQiLCJlbmQiLCJvblN0YXJ0Iiwib25Qcm9ncmVzcyIsIm9uRW5kIiwiZGVsYXkiLCJkdXJhdGlvbiIsImZyb20iLCJ0byIsImFwcGVuZCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlbmd0aCIsImNvdW50IiwidG9wQ2FyZCIsImdldFRyYW5zZm9ybSIsInByIiwicmVkdWNlIiwicmFuayIsInN1aXQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJiYWNrQ2xhc3NOYW1lIiwib2Zmc2V0IiwiZm9yZWdyb3VuZCIsImZhY2VDbGFzc05hbWUiLCJjbGFzc05hbWUiLCJzdHlsZXMiLCJ0cmFuc2Zvcm0iLCJnZXRDb21wdXRlZFN0eWxlIiwicmVwbGFjZSIsInNwbGl0IiwiTnVtYmVyIiwiekluZGV4IiwidG9TdHJpbmciLCJvcGFjaXR5Iiwic3R5bGUiLCJzdWl0cyIsInJhbmtzIiwibGFzdEluZGV4IiwicmFuZG9tSW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21PZmZzZXQiLCJyb3VuZCIsInRleHRDb250ZW50IiwiZ2V0RWxlbSIsImlkIiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJtQkFpQkEsUUFqQmEsU0FDWEEsRUFDQUMsRUFDQUMsR0FDRyxPQUNIQyxJQUFHLFdBQ0QsSUFBTUMsRUFBUUYsRUFBV0UsTUFBTUMsS0FBS0MsTUFPcEMsT0FMQUMsT0FBT0MsZUFBZUYsS0FBTUwsRUFBVSxDQUNwQ1EsVUFBVSxFQUNWTCxNQUFLLElBR0FBLEsseXVEQ3VJWCxRQTVJQSxXQUNFLFdBQ1VNLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEdBSkEsS0FBQUosVUFDQSxLQUFBQyxRQUNBLEtBQUFDLE9BQ0EsS0FBQUMsU0FDQSxLQUFBQyxTQUVSUixLQUFLUyx3QkFDTFQsS0FBS1UsT0FpSVQsT0E3SGdCLFlBQUFDLEtBQWQsVywwRkFJRSxPQUhBWCxLQUFLSyxNQUFNTyxPQUNYWixLQUFLSSxRQUFRUyxhQUViLEdBQU1iLEtBQUtjLG1CQUFtQmQsS0FBS1EsUyxPQUNuQyxPQURBLFNBQ0EsR0FBTVIsS0FBS2MsbUJBQW1CZCxLQUFLUSxTLE9BQ25DLE9BREEsU0FDQSxHQUFNUixLQUFLYyxtQkFBbUJkLEtBQUtPLFMsT0FDbkMsT0FEQSxTQUNBLEdBQU1QLEtBQUtjLG1CQUFtQmQsS0FBS08sUUFBUSxJLGNBQTNDLFNBRUFQLEtBQUtJLFFBQVFXLE1BQU1DLFNBRW5CaEIsS0FBS2lCLGlCLFlBSU8sWUFBQUYsTUFBZCxXLDBGQVNFLE9BUkFmLEtBQUtLLE1BQU1PLE9BQ1haLEtBQUtJLFFBQVFTLGFBRWJiLEtBQUtrQixzQkFFTGxCLEtBQUtPLE9BQU9ZLFFBQ1puQixLQUFLUSxPQUFPVyxRQUVaLEdBQU1uQixLQUFLTSxLQUFLYyxXLE9BQ2hCLE9BREEsU0FDQSxHQUFNcEIsS0FBS00sS0FBS2MsVyxjQUFoQixTQUVBcEIsS0FBS0ksUUFBUU8sS0FBS0ssUyxZQUlOLFlBQUFLLElBQWQsVywwRkFHRSxPQUZBckIsS0FBS0ksUUFBUVMsYUFFYixHQUFNYixLQUFLYyxtQkFBbUJkLEtBQUtRLFMsY0FBbkMsU0FFSVIsS0FBS1EsT0FBT2MsV0FDZHRCLEtBQUtPLE9BQU9nQixnQkFDWnZCLEtBQUtLLE1BQU1tQixLQUFLLGFBQ2hCeEIsS0FBS0ksUUFBUVcsTUFBTUMsVUFDVmhCLEtBQUtRLE9BQU9pQixjQUNyQnpCLEtBQUswQixTQUVMMUIsS0FBS0ksUUFBUVcsTUFBTUMsU0FDbkJoQixLQUFLSSxRQUFRdUIscUIsWUFLSCxZQUFBRCxNQUFkLFcsMEZBSUUsT0FIQTFCLEtBQUtJLFFBQVFTLGFBQ2JiLEtBQUtPLE9BQU9nQixnQkFFWixHQUFNdkIsS0FBSzRCLHlCLGNBQVgsU0FFQTVCLEtBQUs2QixXLFlBR08sWUFBQWYsbUJBQWQsU0FBaUNnQixFQUFZQyxHLFlBQUEsSUFBQUEsT0FBQSxHLG1HQUkzQyxPQUhNLEVBQVcvQixLQUFLTSxLQUFLMEIsZUFBbkJDLEVBQUMsSUFBRUMsRUFBQyxJQUNOLEVBQW1CSixFQUFLSyxVQUFuQkMsRUFBRSxJQUFLQyxFQUFFLElBRXBCLEdBQU1QLEVBQ0hRLEtBQUt0QyxLQUFLTSxLQUFLaUMsTUFBTUMsYUFBYVAsRUFBSUcsRUFBSUYsRUFBSUcsSUFDOUNJLEtBQUtWLEksY0FGUixTLFlBS00sWUFBQWQsZUFBUixXQUNNakIsS0FBS1EsT0FBT2tDLGdCQUFrQjFDLEtBQUtPLE9BQU9tQyxnQkFDNUMxQyxLQUFLSyxNQUFNbUIsS0FBSyxjQUNoQnhCLEtBQUtPLE9BQU9nQixpQkFFWnZCLEtBQUtJLFFBQVF1QixxQkFJVCxZQUFBVCxvQkFBUixzQkFDRSxPQUFJbEIsS0FBS1EsT0FBT21DLE9BQVUzQyxLQUFLTyxPQUFPb0MsT0FBT0MsU0FBUSxTQUFDQyxHQUM5QyxNQUEwQkEsRUFBS1YsVUFBN0JGLEVBQUMsSUFBRUMsRUFBQyxJQUFFWSxFQUFLLFFBQUVDLEVBQU0sU0FDckIsRUFBbUIsRUFBS3pDLEtBQUs2QixVQUF4QkMsRUFBRSxJQUFLQyxFQUFFLElBRXBCLEVBQUsvQixLQUFLZ0MsS0FDUk8sRUFBS2pDLE9BQU80QixhQUFhUCxFQUFJRyxFQUFLVSxFQUFRLEVBQUdaLEVBQUlHLEVBQUtVLEVBQVMsUUFLdkQsWUFBQW5CLHNCQUFkLFcsaUdBQ001QixLQUFLTyxPQUFPeUMsZUFBa0JoRCxLQUFLTyxPQUFPa0IsY0FBMUMsTUFDRixHQUFNekIsS0FBS2MsbUJBQW1CZCxLQUFLTyxTLE9BQ25DLE9BREEsU0FDQSxHQUFNUCxLQUFLNEIseUIsT0FBWCxTLG1DQUlJLFlBQUFDLFNBQVIsV0FDRSxJQUFNb0IsRUFBY2pELEtBQUtRLE9BQU8wQyxXQUMxQkMsRUFBY25ELEtBQUtPLE9BQU8yQyxXQUM1QkUsRUFBTyxZQUVQcEQsS0FBS08sT0FBT2UsV0FBYTJCLEVBQWNFLEVBQ3pDQyxFQUFPLFdBQ0VILElBQWdCRSxJQUN6QkMsRUFBTyxTQUdUcEQsS0FBS0ssTUFBTW1CLEtBQUs0QixHQUNoQnBELEtBQUtJLFFBQVFXLE1BQU1DLFVBR2IsWUFBQVAsc0JBQVIsV0FDRVQsS0FBS0ksUUFBUU8sS0FBSzBDLGNBQWNyRCxLQUFLVyxNQUNyQ1gsS0FBS0ksUUFBUVcsTUFBTXNDLGNBQWNyRCxLQUFLZSxPQUN0Q2YsS0FBS0ksUUFBUWlCLElBQUlnQyxjQUFjckQsS0FBS3FCLEtBQ3BDckIsS0FBS0ksUUFBUXNCLE1BQU0yQixjQUFjckQsS0FBSzBCLFFBR2hDLFlBQUFoQixLQUFSLFdBQ0csRUFESCxVQUNHLHFCLGtEQUNDLFNBQU1WLEtBQUtNLEtBQUtnRCxTLGNBRWhCLE9BREEsU0FDQSxHQUFNdEQsS0FBS00sS0FBS2MsVyxjQUFoQixTQUVBcEIsS0FBS0ksUUFBUU8sS0FBS0ssUyxZQTFIdEIsR0FEQyxHLHlCQWdCRCxHQURDLEcsMEJBaUJELEdBREMsRyx3QkFtQkQsR0FEQyxHLDBCQTZFSCxFQTFJQSxHQ1FBLEVBaEJBLFdBQ0UsV0FBb0J1QyxHQUFBLEtBQUFBLE9BYXRCLE9BWEUsWUFBQUYsY0FBQSxTQUFjRyxHQUNaeEQsS0FBS3VELEtBQUtFLFFBQVVELEdBR3RCLFlBQUFFLFFBQUEsV0FDRTFELEtBQUt1RCxLQUFLSSxhQUFhLFdBQVksS0FHckMsWUFBQTNDLE9BQUEsV0FDRWhCLEtBQUt1RCxLQUFLSyxnQkFBZ0IsYUFFOUIsRUFkQSxHQ3VCQSxFQXJCQSxXQUNFLFdBQ1NqRCxFQUNBSSxFQUNBTSxFQUNBSyxHQUhBLEtBQUFmLE9BQ0EsS0FBQUksUUFDQSxLQUFBTSxNQUNBLEtBQUFLLFFBY1gsT0FYRSxZQUFBYixXQUFBLFdBQ0ViLEtBQUtXLEtBQUsrQyxVQUNWMUQsS0FBS2UsTUFBTTJDLFVBQ1gxRCxLQUFLcUIsSUFBSXFDLFVBQ1QxRCxLQUFLMEIsTUFBTWdDLFdBR2IsWUFBQS9CLGtCQUFBLFdBQ0UzQixLQUFLcUIsSUFBSUwsU0FDVGhCLEtBQUswQixNQUFNVixVQUVmLEVBbkJBLEdDZU8sSUFnQk02QyxHQUFZLElBQUlDLEtBSTFCQyxJQUFJLE9BQVUsU0FBQ0MsRUFBT0MsR0FBVSxPQUFDRCxFQUFRLElBQU1DLEVBQVEsRUFBSSxHQUFLLEtBQ2hFRixJQUFJLE9BQVUsV0FBTSxZQUNwQkEsSUFBSSxTQUFZLFdBQU0sWUFDdEJBLElBQUksUUFBVyxXQUFNLFlBQ3JCQSxJQUFJLFFBQVcsV0FBTSxZQUNyQkEsSUFBSSxPQUFVLFdBQU0sWUFDcEJBLElBQUksU0FBWSxXQUFNLFlBQ3RCQSxJQUFJLFNBQVksV0FBTSxZQUN0QkEsSUFBSSxRQUFXLFdBQU0sWUFDckJBLElBQUksT0FBVSxXQUFNLGFBQ3BCQSxJQUFJLFFBQVcsV0FBTSxhQUNyQkEsSUFBSSxTQUFZLFdBQU0sYUFDdEJBLElBQUksUUFBVyxXQUFNLGEsbU5DU3hCLFFBaERnQixTQUFDRyxHQUNmLFdBQUlDLFNBQWMsU0FBQ0MsR0FDakIsSUFBTUMsRUFBc0JILEVBQVdJLEtBQUksU0FBQ0MsR0FBYyxjQUNyREEsR0FBUyxDQUNaQyxZQUFZLEVBQ1pDLFVBQVUsT0FHWkMsdUJBQXNCLFNBQVNDLElBSzdCLEdBSnNCTixFQUFvQk8sTUFDeEMsU0FBQyxHQUFpQixPQUFQLGNBR2IsQ0FLQSxJQUFNQyxFQUFNQyxLQUFLRCxNQUVqQlIsRUFBb0J6QixTQUFRLFNBQUMyQixHQUNuQixJQy9CT1EsRUQrQlBDLEVBQ05ULEVBQVMsTUFESVUsRUFDYlYsRUFBUyxJQURTVyxFQUNsQlgsRUFBUyxRQURrQlksRUFDM0JaLEVBQVMsV0FEOEJhLEVBQ3ZDYixFQUFTLE1BRHFDQyxFQUM5Q0QsRUFBUyxXQUFUQSxFQUFTLFVBRUtNLEVBQU1HLElBSWpCUixJQUVIRCxFQUFVQyxZQUFhLEVBRXZCVSxjQUdGQyxZQzdDZUosR0Q2Q2FGLEVBQU1HLElBQVVDLEVBQU1ELElDNUM3QyxHQUNQLEVBQUksU0FBQUQsRUFBWSxJQUNmQSxFQUFXLElBQU0sRUFBSUEsRUFBVyxJQUFNLEVBQUlBLEVBQVcsR0FBSyxHRDRDckRGLEVBQU1JLElBQ1JWLEVBQVVFLFVBQVcsRUFFckJXLGtCQUlKVixzQkFBc0JDLFFBOUJwQlAsV0VKUixFQVp3QixTQUFDLEcsSUFDdkIsSUFBQWlCLGFBQUssSUFBRyxJQUFDLEVBQ1QsSUFBQUMsZ0JBQVEsSUFBRyxJQUFDLEVBQ1pKLEVBQU8sVUFDUEMsRUFBVSxhQUNWQyxFQUFLLFFBRUNKLEVBQVFLLEVBQVFQLEtBQUtELE1BRTNCLE1BQU8sQ0FBRUcsTUFBSyxFQUFFRSxRQUFPLEVBQUVDLFdBQVUsRUFBRUMsTUFBSyxFQUFFSCxJQUFLRCxFQUFRTSxJQ2QzRCxFQUh5QixTQUFDQyxFQUFjQyxFQUFZVCxHQUNsRCxPQUFBUSxHQUFRQyxFQUFLRCxHQUFRUixHQzhCdkIsRUE3QkEsV0FHRSxXQUFvQnhCLEdBQUEsS0FBQUEsT0FGcEIsS0FBQVosTUFBZ0IsR0EwQmxCLE9BdEJFLFlBQUFMLEtBQUEsU0FBS08sR0FJSCxPQUhBN0MsS0FBSzJDLE1BQU1MLEtBQUtPLEdBQ2hCN0MsS0FBS3VELEtBQUtrQyxPQUFPNUMsRUFBS1UsTUFFZnZELE1BR1QsWUFBQXVDLElBQUEsV0FDRSxPQUFPdkMsS0FBSzJDLE1BQU1KLE9BR3BCLFlBQUFKLFFBQUEsV0FDRSxPQUFPbkMsS0FBS3VELEtBQUttQyx5QkFHbkIsc0JBQUksb0JBQUssQyxJQUFULFdBQ0UsT0FBTzFGLEtBQUsyQyxNQUFNZ0QsUSxnQ0FHcEIsc0JBQUksc0JBQU8sQyxJQUFYLFdBQ0UsT0FBTzNGLEtBQUsyQyxNQUFNM0MsS0FBSzRGLE1BQVEsSSxnQ0FFbkMsRUEzQkEsRyx3Y0N5REEsUUFsREEseUIsK0NBZ0RBLE9BaERtQixPQUNYLFlBQUFuRCxLQUFOLFNBQVdWLEcsNG9DQUtULE9BSk0sRUFBVy9CLEtBQUs2RixRQUFRQyxlQUF0QjdELEVBQUMsSUFBRUMsRUFBQyxJQUNORSxHQUNZLElBQWZwQyxLQUFLNEYsTUFBYyxFQUFJNUYsS0FBSzRGLE1BQVEsR0FBSzVGLEtBQUs2RixRQUFRMUQsVUFBVVcsTUFFbkUsR0FBTSxFQUFRLENBQ1osRUFBZ0IsQ0FDZHdDLFNBQVUsSUFDVkgsV0FBWSxTQUFDWSxHQUNYLEVBQUtGLFFBQVFyRCxhQUNYLEVBQWlCUCxFQUFHRyxFQUFJMkQsR0FDeEIsRUFBaUI3RCxFQUFHLEVBQUc2RCxLQUczQlgsTUFBTyxXQUNEckQsR0FDRixFQUFLOEQsUUFBUXJFLGEsY0FYckIsUyx5U0FrQkYsWUFBQUwsTUFBQSxXQUdFLE9BRkFuQixLQUFLMkMsTUFBUSxHQUVOM0MsTUFHVCxZQUFBa0QsU0FBQSxXQUNFLE9BQU9sRCxLQUFLMkMsTUFBTXFELFFBQ2hCLFNBQUNoQyxFQUFPLEVBQVVDLEcsSUFBUmdDLEVBQUksT0FBYyxPQUFBakMsRUFBUUgsRUFBVWhFLElBQUlvRyxFQUFkcEMsQ0FBb0JHLEVBQU9DLEtBQy9ELElBSUosWUFBQXZCLGFBQUEsV0FDRSxPQXhDYyxLQXdDUDFDLEtBQUtrRCxZQUEyQyxJQUFmbEQsS0FBSzRGLE9BRy9DLFlBQUF0RSxRQUFBLFdBQ0UsT0FBT3RCLEtBQUtrRCxXQTVDRSxJQStDaEIsc0JBQUksNEJBQWEsQyxJQUFqQixXQUNFLE9BQXNCLElBQWZsRCxLQUFLNEYsTyxnQ0FFaEIsRUFoREEsQ0FBbUIsRyw2ZENHbkIsUUFWQSx5QiwrQ0FRQSxPQVJxQixPQUNuQixZQUFBckUsY0FBQSxXLE1BQ2MsUUFBWixFQUFBdkIsS0FBSzZGLGVBQU8sU0FBRXJFLFFBR2hCLFlBQUF3QixZQUFBLFdBQ0UsT0FBT2hELEtBQUtrRCxXQUFhLElBRTdCLEVBUkEsQ0FBcUIsR0NpRXJCLEVBL0RBLFdBU0UsV0FBWStDLEVBQVlDLEVBQVlqQyxRQUFBLElBQUFBLE1BQUEsR0FScEMsS0FBQVYsS0FBTzRDLFNBQVNDLGNBQWMsT0FJdEIsS0FBQUMsY0FBZ0IsWUFLdEJyRyxLQUFLaUcsS0FBT0EsRUFFWixJQUFNSyxHQUFVckMsRUFBUSxFQUV4QmpFLEtBQUt3QyxhQUFhOEQsRUFBUUEsR0FBUUMsV0FBYXRDLEVBRS9DakUsS0FBS3dHLGNBQWdCLFFBQVFQLEVBQUksT0FBT0MsRUFDeENsRyxLQUFLeUcsVUFBWXpHLEtBQUtxRyxjQTRDMUIsT0F6Q0UsWUFBQTdFLEtBQUEsV0FHRSxPQUZBeEIsS0FBS3lHLFVBQVl6RyxLQUFLd0csY0FFZnhHLE1BR1QsWUFBQVksS0FBQSxXQUdFLE9BRkFaLEtBQUt5RyxVQUFZekcsS0FBS3FHLGNBRWZyRyxNQUdULFlBQUF3QyxhQUFBLFNBQWFQLEVBQVdDLEdBR3RCLE9BRkFsQyxLQUFLMEcsT0FBT0MsVUFBWSxhQUFhMUUsRUFBQyxPQUFPQyxFQUFDLE1BRXZDbEMsTUFHVCxZQUFBOEYsYUFBQSxXQUNFLE9DM0N1QnZDLEVEMkNFdkQsS0FBS3VELEtDMUMxQixFQUFpQnFELGlCQUFpQnJELEdBQ3JDb0QsVUFBVUUsUUFBUSxhQUFjLElBQ2hDQyxNQUFNLEtBRk03RSxFQUFDLEtBQUVDLEVBQUMsS0FJWixDQUFFRCxFQUFHOEUsT0FBTzlFLElBQU0sRUFBR0MsRUFBRzZFLE9BQU83RSxJQUFNLEdBTHBCLElBQUNxQixFQUNuQixFQUFTdEIsRUFBR0MsR0Q2Q2xCLFlBQUFDLFFBQUEsV0FDRSxPQUFPbkMsS0FBS3VELEtBQUttQyx5QkFHbkIsc0JBQVksd0JBQVMsQyxJQUFyQixTQUFzQmUsR0FDcEJ6RyxLQUFLdUQsS0FBS2tELFVBQVlBLEcsZ0NBR3hCLHNCQUFJLHlCQUFVLEMsSUFBZCxTQUFlTyxHQUNiaEgsS0FBSzBHLE9BQU9NLE9BQVNBLEVBQU9DLFksZ0NBRzlCLHNCQUFJLHNCQUFPLEMsSUFBWCxTQUFZQyxHQUNWbEgsS0FBSzBHLE9BQU9RLFFBQVVBLEVBQVFELFksZ0NBR2hDLHNCQUFZLHFCQUFNLEMsSUFBbEIsV0FDRSxPQUFPakgsS0FBS3VELEtBQUs0RCxPLGdDQUVyQixFQTdEQSxHLDB5REUwR0EsUUFyR0EsWUFDRSxXQUFZNUQsRUFBc0I2RCxFQUFlQyxHQUFqRCxNQUNFLFlBQU05RCxJQUFLLEssT0FFWDZELEVBQU14RSxTQUFRLFNBQUNzRCxHQUNibUIsRUFBTXpFLFNBQVEsU0FBQ3FELEdBQ2IsSUFBTUssR0FBVSxFQUFLVixNQUFRLEVBQ3ZCL0MsRUFBTyxJQUFJLEVBQUtvRCxFQUFNQyxFQUFNLEVBQUtOLE9BQ3BDcEUsT0FDQWdCLGFBQWE4RCxHQUFTLElBQU1BLEdBRS9CekQsRUFBS3FFLFFBQVUsRUFFZixFQUFLNUUsS0FBS08sUyxFQXNGbEIsT0FuR21CLE9Ba0JYLFlBQUFTLE1BQU4sVywwRkFDRSxTQUFNLEVBQ0p0RCxLQUFLMkMsTUFBTTJCLEtBQUksU0FBQ3pCLEVBQU1vQixHQUNkLE1BQVdwQixFQUFLaUQsZUFBZDdELEVBQUMsSUFBRUMsRUFBQyxJQUNOb0UsR0FBVXJDLEVBQVEsRUFFeEIsT0FBTyxFQUFnQixDQUNyQm9CLE1BQWUsRUFBUnBCLEVBQ1BxQixTQUFVLElBQ1ZILFdBQVksU0FBQ1ksR0FFWGxELEVBQUtMLGFBQ0gsRUFBaUJQLEVBQUdxRSxFQUFRUCxHQUM1QixFQUFpQjdELEVBQUdvRSxFQUFRUCxJQUM1Qm1CLFFBQVUsRUFBaUIsRUFBRyxFQUFHbkIsSUFFckNYLE1BQU8sV0FDTHZDLEVBQUtqQyxlLGNBaEJiLFMsWUF1QkksWUFBQVEsUUFBTixXLG9HQUNFLElBQVNrRyxFQUFZdEgsS0FBSzRGLE1BQVEsRUFBRzBCLEVBQVdBLEdBQWEsRUFDckRDLEVBQWNDLEtBQUtDLE1BQU1ELEtBQUtFLFVBQVlKLEVBQVksSUFFNUQsRUFBbUQsQ0FDakR0SCxLQUFLMkMsTUFBTTRFLEdBQ1h2SCxLQUFLMkMsTUFBTTJFLElBRlp0SCxLQUFLMkMsTUFBTTJFLEdBQVUsS0FBRXRILEtBQUsyQyxNQUFNNEUsR0FBWSxLQU1qRCxTQUFNLEVBQ0p2SCxLQUFLMkMsTUFBTXFELFFBQU8sU0FBQzlCLEVBQVlyQixFQUFNb0IsR0FDbkMsSUFBTW9CLEVBQWdCLEVBQVJwQixFQUVSLEVBQVdwQixFQUFLaUQsZUFBZDdELEVBQUMsSUFBRUMsRUFBQyxJQUNOb0UsR0FBVXJDLEVBQVEsRUFDbEIwRCxHQUN5QixFQUE1QkgsS0FBS0ksTUFBTUosS0FBS0UsVUFBZ0IsSUFDL0JGLEtBQUtFLFNBQVc3RSxFQUFLVixVQUFVVyxNQUFTLEVBQUksSUE0QmhELE9BMUJBb0IsRUFBVzVCLEtBQ1QsRUFBZ0IsQ0FDZCtDLE1BQUssRUFDTEMsU0FWYSxJQVdiSCxXQUFZLFNBQUNZLEdBQ1hsRCxFQUFLTCxhQUNILEVBQWlCUCxFQUFHMEYsRUFBYzVCLEdBQ2xDLEVBQWlCN0QsRUFBR29FLEVBQVFQLE9BSWxDLEVBQWdCLENBQ2RULFNBbkJhLElBb0JiRCxNQUFPQSxFQXBCTSxJQXFCYkgsUUFBUyxXQUNQckMsRUFBSzBELFdBQWF0QyxHQUVwQmtCLFdBQVksU0FBQ1ksR0FDWGxELEVBQUtMLGFBQ0gsRUFBaUJtRixFQUFjckIsRUFBUVAsR0FDdkNPLE9BTURwQyxJQUNOLE0sY0FyQ0wsUyxZQXlDRixZQUFBbEMsYUFBQSxXQUNRLE1BQVdoQyxLQUFLbUMsVUFBZEYsRUFBQyxJQUFFQyxFQUFDLElBQ04sRUFBbUJsQyxLQUFLNkYsUUFBUUMsZUFFdEMsTUFBTyxDQUFFN0QsRUFBR0EsRUFGQyxJQUVPQyxFQUFHQSxFQUZILE1BSXhCLEVBbkdBLENBQW1CLEdDd0NuQixFQTdDQSxXQUNFLFdBQW9CcUIsR0FBQSxLQUFBQSxPQTBDdEIsT0F4Q0UsWUFBQS9CLEtBQUEsU0FBSzRCLEdBQUwsV0FDRSxFQUFRLENBQ04sRUFBZ0IsQ0FDZGtDLFNBQVUsSUFDVkosUUFBUyxXQUNQLEVBQUszQixLQUFLc0UsWUFBY3pFLEdBRTFCK0IsV0FBWSxTQUFDSixHQUNYLEVBQUttQyxRQUFVLEVBQWlCLEVBQUcsRUFBR25DLElBRXhDSyxNQUFPLFdBQ0wsRUFBSzhCLFFBQVUsU0FNdkIsWUFBQXRHLEtBQUEsc0JBQzhCLE1BQXhCWixLQUFLMEcsT0FBT1EsU0FDZCxFQUFRLENBQ04sRUFBZ0IsQ0FDZDVCLFNBQVUsSUFDVkgsV0FBWSxTQUFDSixHQUNYLEVBQUttQyxRQUFVLEVBQWlCLEVBQUcsRUFBR25DLElBRXhDSyxNQUFPLFdBQ0wsRUFBSzhCLFFBQVUsUUFPekIsc0JBQVkscUJBQU0sQyxJQUFsQixXQUNFLE9BQU9sSCxLQUFLdUQsS0FBSzRELE8sZ0NBR25CLHNCQUFZLHNCQUFPLEMsSUFBbkIsU0FBb0JELEdBQ2xCbEgsS0FBSzBHLE9BQU9RLFFBQVVBLEVBQVFELFksZ0NBRWxDLEVBM0NBLEdDUUEsSUFBTWEsRUFBVSxTQUF3QkMsR0FDdEMsT0FBQTVCLFNBQVM2QixlQUFlRCxJQUcxQixJQUFJLEVBQ0YsSUFBSSxFQUNGLElBQUksRUFBT0QsRUFBMkIsYUFDdEMsSUFBSSxFQUFPQSxFQUEyQixjQUN0QyxJQUFJLEVBQU9BLEVBQTJCLFlBQ3RDLElBQUksRUFBT0EsRUFBMkIsZUFFeEMsSUFBSSxFQUFNQSxFQUF3QixVQUNsQyxJQUFJLEVBQUtBLEVBQXdCLFFDaEJkLENBQUMsUUFBRCw4QmJTQSxDLDZGWVFuQixJQUFJLEVBQU9BLEVBQXdCLFdBQ25DLElBQUksRUFBS0EsRUFBd0IsYSIsImZpbGUiOiJqcy9idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBiaW5kID0gKFxuICB0YXJnZXQ6IHVua25vd24sXG4gIHByb3BOYW1lOiBzdHJpbmcsXG4gIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvclxuKSA9PiAoe1xuICBnZXQoKSB7XG4gICAgY29uc3QgdmFsdWUgPSBkZXNjcmlwdG9yLnZhbHVlLmJpbmQodGhpcyk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgcHJvcE5hbWUsIHtcbiAgICAgIHdyaXRhYmxlOiB0cnVlLCAvLyBuZWVkZWQgZm9yIGplc3QncyBzcHkgdG8gd29yayBwcm9wZXJseTtcbiAgICAgIHZhbHVlLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGJpbmQ7XG4iLCJpbXBvcnQgQnV0dG9ucyBmcm9tICdidXR0b25zL2J1dHRvbnMnO1xuaW1wb3J0IERlYWxlciBmcm9tICdjYXJkSG9sZGVycy9kZWFsZXInO1xuaW1wb3J0IERlY2sgZnJvbSAnY2FyZEhvbGRlcnMvZGVjayc7XG5pbXBvcnQgSGFuZCBmcm9tICdjYXJkSG9sZGVycy9oYW5kJztcbmltcG9ydCBQb3B1cFRleHQgZnJvbSAnY29uc3RhbnRzL3BvcHVwVGV4dCc7XG5pbXBvcnQgUG9wdXAgZnJvbSAncG9wdXAnO1xuaW1wb3J0IGJpbmQgZnJvbSAndXRpbHMvYmluZCc7XG5cbmNsYXNzIEJsYWNramFjayB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYnV0dG9uczogQnV0dG9ucyxcbiAgICBwcml2YXRlIHBvcHVwOiBQb3B1cCxcbiAgICBwcml2YXRlIGRlY2s6IERlY2ssXG4gICAgcHJpdmF0ZSBkZWFsZXI6IERlYWxlcixcbiAgICBwcml2YXRlIHBsYXllcjogSGFuZFxuICApIHtcbiAgICB0aGlzLmF0dGFjaEJ1dHRvbnNIYW5kbGVycygpO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgQGJpbmRcbiAgcHJpdmF0ZSBhc3luYyBkZWFsKCkge1xuICAgIHRoaXMucG9wdXAuaGlkZSgpO1xuICAgIHRoaXMuYnV0dG9ucy5kaXNhYmxlQWxsKCk7XG5cbiAgICBhd2FpdCB0aGlzLnN1cHBseUhhbmRXaXRoQ2FyZCh0aGlzLnBsYXllcik7XG4gICAgYXdhaXQgdGhpcy5zdXBwbHlIYW5kV2l0aENhcmQodGhpcy5wbGF5ZXIpO1xuICAgIGF3YWl0IHRoaXMuc3VwcGx5SGFuZFdpdGhDYXJkKHRoaXMuZGVhbGVyKTtcbiAgICBhd2FpdCB0aGlzLnN1cHBseUhhbmRXaXRoQ2FyZCh0aGlzLmRlYWxlciwgZmFsc2UpO1xuXG4gICAgdGhpcy5idXR0b25zLnJlc2V0LmVuYWJsZSgpO1xuXG4gICAgdGhpcy5jaGVja0JsYWNramFjaygpO1xuICB9XG5cbiAgQGJpbmRcbiAgcHJpdmF0ZSBhc3luYyByZXNldCgpIHtcbiAgICB0aGlzLnBvcHVwLmhpZGUoKTtcbiAgICB0aGlzLmJ1dHRvbnMuZGlzYWJsZUFsbCgpO1xuXG4gICAgdGhpcy5zdXBwbHlEZWNrV2l0aENhcmRzKCk7XG5cbiAgICB0aGlzLmRlYWxlci5lbXB0eSgpO1xuICAgIHRoaXMucGxheWVyLmVtcHR5KCk7XG5cbiAgICBhd2FpdCB0aGlzLmRlY2suc2h1ZmZsZSgpO1xuICAgIGF3YWl0IHRoaXMuZGVjay5zaHVmZmxlKCk7XG5cbiAgICB0aGlzLmJ1dHRvbnMuZGVhbC5lbmFibGUoKTtcbiAgfVxuXG4gIEBiaW5kXG4gIHByaXZhdGUgYXN5bmMgaGl0KCkge1xuICAgIHRoaXMuYnV0dG9ucy5kaXNhYmxlQWxsKCk7XG5cbiAgICBhd2FpdCB0aGlzLnN1cHBseUhhbmRXaXRoQ2FyZCh0aGlzLnBsYXllcik7XG5cbiAgICBpZiAodGhpcy5wbGF5ZXIuaGFzQnVzdCgpKSB7XG4gICAgICB0aGlzLmRlYWxlci5yZXZlYWxUb3BDYXJkKCk7XG4gICAgICB0aGlzLnBvcHVwLnNob3coUG9wdXBUZXh0LlBsYXllckRlZmVhdCk7XG4gICAgICB0aGlzLmJ1dHRvbnMucmVzZXQuZW5hYmxlKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnBsYXllci5oYXNDYXJkc0xpbWl0KSB7XG4gICAgICB0aGlzLnN0YW5kKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnV0dG9ucy5yZXNldC5lbmFibGUoKTtcbiAgICAgIHRoaXMuYnV0dG9ucy5lbmFibGVIaXRBbmRTdGFuZCgpO1xuICAgIH1cbiAgfVxuXG4gIEBiaW5kXG4gIHByaXZhdGUgYXN5bmMgc3RhbmQoKSB7XG4gICAgdGhpcy5idXR0b25zLmRpc2FibGVBbGwoKTtcbiAgICB0aGlzLmRlYWxlci5yZXZlYWxUb3BDYXJkKCk7XG5cbiAgICBhd2FpdCB0aGlzLnN1cHBseURlYWxlcldpdGhDYXJkcygpO1xuXG4gICAgdGhpcy5jb25jbHVkZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzdXBwbHlIYW5kV2l0aENhcmQoaGFuZDogSGFuZCwgc2hvdWxkU2hvd0ZhY2UgPSB0cnVlKSB7XG4gICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLmRlY2suZ2V0T2Zmc2V0VG9wKCk7XG4gICAgY29uc3QgeyB4OiBkeCwgeTogZHkgfSA9IGhhbmQuZ2V0UmVjdCgpO1xuXG4gICAgYXdhaXQgaGFuZFxuICAgICAgLnB1c2godGhpcy5kZWNrLnBvcCgpLnNldFRyYW5zZm9ybSh4IC0gZHgsIHkgLSBkeSkpXG4gICAgICAuZHJhZyhzaG91bGRTaG93RmFjZSk7XG4gIH1cblxuICBwcml2YXRlIGNoZWNrQmxhY2tqYWNrKCkge1xuICAgIGlmICh0aGlzLnBsYXllci5oYXNCbGFja2phY2soKSB8fCB0aGlzLmRlYWxlci5oYXNCbGFja2phY2soKSkge1xuICAgICAgdGhpcy5wb3B1cC5zaG93KFBvcHVwVGV4dC5CbGFja2phY2spO1xuICAgICAgdGhpcy5kZWFsZXIucmV2ZWFsVG9wQ2FyZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmJ1dHRvbnMuZW5hYmxlSGl0QW5kU3RhbmQoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN1cHBseURlY2tXaXRoQ2FyZHMoKSB7XG4gICAgWy4uLnRoaXMucGxheWVyLmNhcmRzLCAuLi50aGlzLmRlYWxlci5jYXJkc10uZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0gPSBjYXJkLmdldFJlY3QoKTtcbiAgICAgIGNvbnN0IHsgeDogZHgsIHk6IGR5IH0gPSB0aGlzLmRlY2suZ2V0UmVjdCgpO1xuXG4gICAgICB0aGlzLmRlY2sucHVzaChcbiAgICAgICAgY2FyZC5oaWRlKCkuc2V0VHJhbnNmb3JtKHggLSBkeCArIHdpZHRoIC8gMiwgeSAtIGR5ICsgaGVpZ2h0IC8gMilcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1cHBseURlYWxlcldpdGhDYXJkcygpIHtcbiAgICBpZiAodGhpcy5kZWFsZXIuY2FuRHJhd0NhcmQoKSAmJiAhdGhpcy5kZWFsZXIuaGFzQ2FyZHNMaW1pdCkge1xuICAgICAgYXdhaXQgdGhpcy5zdXBwbHlIYW5kV2l0aENhcmQodGhpcy5kZWFsZXIpO1xuICAgICAgYXdhaXQgdGhpcy5zdXBwbHlEZWFsZXJXaXRoQ2FyZHMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNvbmNsdWRlKCkge1xuICAgIGNvbnN0IHBsYXllclNjb3JlID0gdGhpcy5wbGF5ZXIuZ2V0U2NvcmUoKTtcbiAgICBjb25zdCBkZWFsZXJTY29yZSA9IHRoaXMuZGVhbGVyLmdldFNjb3JlKCk7XG4gICAgbGV0IHRleHQgPSBQb3B1cFRleHQuUGxheWVyRGVmZWF0O1xuXG4gICAgaWYgKHRoaXMuZGVhbGVyLmhhc0J1c3QoKSB8fCBwbGF5ZXJTY29yZSA+IGRlYWxlclNjb3JlKSB7XG4gICAgICB0ZXh0ID0gUG9wdXBUZXh0LlBsYXllclZpY3Rvcnk7XG4gICAgfSBlbHNlIGlmIChwbGF5ZXJTY29yZSA9PT0gZGVhbGVyU2NvcmUpIHtcbiAgICAgIHRleHQgPSBQb3B1cFRleHQuUHVzaDtcbiAgICB9XG5cbiAgICB0aGlzLnBvcHVwLnNob3codGV4dCk7XG4gICAgdGhpcy5idXR0b25zLnJlc2V0LmVuYWJsZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhdHRhY2hCdXR0b25zSGFuZGxlcnMoKSB7XG4gICAgdGhpcy5idXR0b25zLmRlYWwuYXR0YWNoSGFuZGxlcih0aGlzLmRlYWwpO1xuICAgIHRoaXMuYnV0dG9ucy5yZXNldC5hdHRhY2hIYW5kbGVyKHRoaXMucmVzZXQpO1xuICAgIHRoaXMuYnV0dG9ucy5oaXQuYXR0YWNoSGFuZGxlcih0aGlzLmhpdCk7XG4gICAgdGhpcy5idXR0b25zLnN0YW5kLmF0dGFjaEhhbmRsZXIodGhpcy5zdGFuZCk7XG4gIH1cblxuICBwcml2YXRlIGluaXQoKSB7XG4gICAgKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuZGVjay5pbnRybygpO1xuICAgICAgYXdhaXQgdGhpcy5kZWNrLnNodWZmbGUoKTtcbiAgICAgIGF3YWl0IHRoaXMuZGVjay5zaHVmZmxlKCk7XG5cbiAgICAgIHRoaXMuYnV0dG9ucy5kZWFsLmVuYWJsZSgpO1xuICAgIH0pKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmxhY2tqYWNrO1xuIiwiY2xhc3MgQnV0dG9uIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtOiBIVE1MQnV0dG9uRWxlbWVudCkge31cblxuICBhdHRhY2hIYW5kbGVyKGNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5lbGVtLm9uY2xpY2sgPSBjYWxsYmFjaztcbiAgfVxuXG4gIGRpc2FibGUoKSB7XG4gICAgdGhpcy5lbGVtLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XG4gIH1cblxuICBlbmFibGUoKSB7XG4gICAgdGhpcy5lbGVtLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCdXR0b247XG4iLCJpbXBvcnQgQnV0dG9uIGZyb20gJy4vYnV0dG9uJztcblxuY2xhc3MgQnV0dG9ucyB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBkZWFsOiBCdXR0b24sXG4gICAgcHVibGljIHJlc2V0OiBCdXR0b24sXG4gICAgcHVibGljIGhpdDogQnV0dG9uLFxuICAgIHB1YmxpYyBzdGFuZDogQnV0dG9uXG4gICkge31cblxuICBkaXNhYmxlQWxsKCkge1xuICAgIHRoaXMuZGVhbC5kaXNhYmxlKCk7XG4gICAgdGhpcy5yZXNldC5kaXNhYmxlKCk7XG4gICAgdGhpcy5oaXQuZGlzYWJsZSgpO1xuICAgIHRoaXMuc3RhbmQuZGlzYWJsZSgpO1xuICB9XG5cbiAgZW5hYmxlSGl0QW5kU3RhbmQoKSB7XG4gICAgdGhpcy5oaXQuZW5hYmxlKCk7XG4gICAgdGhpcy5zdGFuZC5lbmFibGUoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCdXR0b25zO1xuIiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNoYWRvd1xuY29uc3QgZW51bSBSYW5rIHtcbiAgQWNlID0gJ2FjZScsXG4gIFR3byA9ICd0d28nLFxuICBUaHJlZSA9ICd0aHJlZScsXG4gIEZvdXIgPSAnZm91cicsXG4gIEZpdmUgPSAnZml2ZScsXG4gIFNpeCA9ICdzaXgnLFxuICBTZXZlbiA9ICdzZXZlbicsXG4gIEVpZ2h0ID0gJ2VpZ2h0JyxcbiAgTmluZSA9ICduaW5lJyxcbiAgVGVuID0gJ3RlbicsXG4gIEphY2sgPSAnamFjaycsXG4gIFF1ZWVuID0gJ3F1ZWVuJyxcbiAgS2luZyA9ICdraW5nJyxcbn1cblxuZXhwb3J0IGNvbnN0IHJhbmtzID0gW1xuICBSYW5rLkFjZSxcbiAgUmFuay5Ud28sXG4gIFJhbmsuVGhyZWUsXG4gIFJhbmsuRm91cixcbiAgUmFuay5GaXZlLFxuICBSYW5rLlNpeCxcbiAgUmFuay5TZXZlbixcbiAgUmFuay5FaWdodCxcbiAgUmFuay5OaW5lLFxuICBSYW5rLlRlbixcbiAgUmFuay5KYWNrLFxuICBSYW5rLlF1ZWVuLFxuICBSYW5rLktpbmcsXG5dO1xuXG5leHBvcnQgY29uc3QgcmFua1ZhbHVlID0gbmV3IE1hcDxcbiAgUmFuayxcbiAgKHNjb3JlPzogbnVtYmVyLCBpbmRleD86IG51bWJlcikgPT4gbnVtYmVyXG4+KClcbiAgLnNldChSYW5rLkFjZSwgKHNjb3JlLCBpbmRleCkgPT4gKHNjb3JlIDwgMTEgJiYgaW5kZXggPCAyID8gMTEgOiAxKSlcbiAgLnNldChSYW5rLlR3bywgKCkgPT4gMilcbiAgLnNldChSYW5rLlRocmVlLCAoKSA9PiAzKVxuICAuc2V0KFJhbmsuRm91ciwgKCkgPT4gNClcbiAgLnNldChSYW5rLkZpdmUsICgpID0+IDUpXG4gIC5zZXQoUmFuay5TaXgsICgpID0+IDYpXG4gIC5zZXQoUmFuay5TZXZlbiwgKCkgPT4gNylcbiAgLnNldChSYW5rLkVpZ2h0LCAoKSA9PiA4KVxuICAuc2V0KFJhbmsuTmluZSwgKCkgPT4gOSlcbiAgLnNldChSYW5rLlRlbiwgKCkgPT4gMTApXG4gIC5zZXQoUmFuay5KYWNrLCAoKSA9PiAxMClcbiAgLnNldChSYW5rLlF1ZWVuLCAoKSA9PiAxMClcbiAgLnNldChSYW5rLktpbmcsICgpID0+IDEwKTtcblxuZXhwb3J0IGRlZmF1bHQgUmFuaztcbiIsImltcG9ydCBlYXNlQW5pbWF0aW9uIGZyb20gJy4vZWFzZUFuaW1hdGlvbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0aW9uIHtcbiAgc3RhcnQ6IG51bWJlcjtcbiAgZW5kOiBudW1iZXI7XG4gIG9uU3RhcnQ/OiAoKSA9PiB2b2lkO1xuICBvblByb2dyZXNzPzogKHByb2dyZXNzOiBudW1iZXIpID0+IHZvaWQ7XG4gIG9uRW5kPzogKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgYW5pbWF0ZSA9IChhbmltYXRpb25zOiBBbmltYXRpb25bXSkgPT5cbiAgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBhbmltYXRpb25zV2l0aEZsYWdzID0gYW5pbWF0aW9ucy5tYXAoKGFuaW1hdGlvbikgPT4gKHtcbiAgICAgIC4uLmFuaW1hdGlvbixcbiAgICAgIGhhc1N0YXJ0ZWQ6IGZhbHNlLFxuICAgICAgaGFzRW5kZWQ6IGZhbHNlLFxuICAgIH0pKTtcblxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiBmKCkge1xuICAgICAgY29uc3QgaGF2ZUFsbEVuZGVkID0gIWFuaW1hdGlvbnNXaXRoRmxhZ3Muc29tZShcbiAgICAgICAgKHsgaGFzRW5kZWQgfSkgPT4gIWhhc0VuZGVkXG4gICAgICApO1xuXG4gICAgICBpZiAoaGF2ZUFsbEVuZGVkKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgICBhbmltYXRpb25zV2l0aEZsYWdzLmZvckVhY2goKGFuaW1hdGlvbikgPT4ge1xuICAgICAgICBjb25zdCB7IHN0YXJ0LCBlbmQsIG9uU3RhcnQsIG9uUHJvZ3Jlc3MsIG9uRW5kLCBoYXNTdGFydGVkLCBoYXNFbmRlZCB9ID1cbiAgICAgICAgICBhbmltYXRpb247XG5cbiAgICAgICAgaWYgKGhhc0VuZGVkIHx8IG5vdyA8IHN0YXJ0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFoYXNTdGFydGVkKSB7XG4gICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbiAgICAgICAgICBhbmltYXRpb24uaGFzU3RhcnRlZCA9IHRydWU7XG5cbiAgICAgICAgICBvblN0YXJ0Py4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9uUHJvZ3Jlc3M/LihlYXNlQW5pbWF0aW9uKChub3cgLSBzdGFydCkgLyAoZW5kIC0gc3RhcnQpKSk7XG5cbiAgICAgICAgaWYgKG5vdyA+IGVuZCkge1xuICAgICAgICAgIGFuaW1hdGlvbi5oYXNFbmRlZCA9IHRydWU7XG5cbiAgICAgICAgICBvbkVuZD8uKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZik7XG4gICAgfSk7XG4gIH0pO1xuXG5leHBvcnQgZGVmYXVsdCBhbmltYXRlO1xuIiwiY29uc3QgZWFzZUFuaW1hdGlvbiA9IChwcm9ncmVzczogbnVtYmVyKSA9PlxuICBwcm9ncmVzcyA8IDAuNVxuICAgID8gNCAqIHByb2dyZXNzICoqIDNcbiAgICA6IChwcm9ncmVzcyAtIDEpICogKDIgKiBwcm9ncmVzcyAtIDIpICogKDIgKiBwcm9ncmVzcyAtIDIpICsgMTtcblxuZXhwb3J0IGRlZmF1bHQgZWFzZUFuaW1hdGlvbjtcbiIsImludGVyZmFjZSBBbmltYXRpb25QYXJhbXMge1xuICBkZWxheT86IG51bWJlcjtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIG9uU3RhcnQ/OiAoKSA9PiB2b2lkO1xuICBvblByb2dyZXNzPzogKHByb2dyZXNzOiBudW1iZXIpID0+IHZvaWQ7XG4gIG9uRW5kPzogKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgY3JlYXRlQW5pbWF0aW9uID0gKHtcbiAgZGVsYXkgPSAwLFxuICBkdXJhdGlvbiA9IDAsXG4gIG9uU3RhcnQsXG4gIG9uUHJvZ3Jlc3MsXG4gIG9uRW5kLFxufTogQW5pbWF0aW9uUGFyYW1zKSA9PiB7XG4gIGNvbnN0IHN0YXJ0ID0gZGVsYXkgKyBEYXRlLm5vdygpO1xuXG4gIHJldHVybiB7IHN0YXJ0LCBvblN0YXJ0LCBvblByb2dyZXNzLCBvbkVuZCwgZW5kOiBzdGFydCArIGR1cmF0aW9uIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVBbmltYXRpb247XG4iLCJjb25zdCBnZXRBbmltYXRpb25TdGVwID0gKGZyb206IG51bWJlciwgdG86IG51bWJlciwgcHJvZ3Jlc3M6IG51bWJlcikgPT5cbiAgZnJvbSArICh0byAtIGZyb20pICogcHJvZ3Jlc3M7XG5cbmV4cG9ydCBkZWZhdWx0IGdldEFuaW1hdGlvblN0ZXA7XG4iLCJpbXBvcnQgQ2FyZCBmcm9tICdjYXJkJztcblxuYWJzdHJhY3QgY2xhc3MgQ2FyZFN0YWNrIHtcbiAgY2FyZHM6IENhcmRbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbTogSFRNTERpdkVsZW1lbnQpIHt9XG5cbiAgcHVzaChjYXJkOiBDYXJkKSB7XG4gICAgdGhpcy5jYXJkcy5wdXNoKGNhcmQpO1xuICAgIHRoaXMuZWxlbS5hcHBlbmQoY2FyZC5lbGVtKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcG9wKCkge1xuICAgIHJldHVybiB0aGlzLmNhcmRzLnBvcCgpO1xuICB9XG5cbiAgZ2V0UmVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB9XG5cbiAgZ2V0IGNvdW50KCkge1xuICAgIHJldHVybiB0aGlzLmNhcmRzLmxlbmd0aDtcbiAgfVxuXG4gIGdldCB0b3BDYXJkKCkge1xuICAgIHJldHVybiB0aGlzLmNhcmRzW3RoaXMuY291bnQgLSAxXTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkU3RhY2s7XG4iLCJpbXBvcnQgeyByYW5rVmFsdWUgfSBmcm9tICdjb25zdGFudHMvcmFua3MnO1xuaW1wb3J0IGFuaW1hdGUgZnJvbSAndXRpbHMvYW5pbWF0ZSc7XG5pbXBvcnQgY3JlYXRlQW5pbWF0aW9uIGZyb20gJ3V0aWxzL2NyZWF0ZUFuaW1hdGlvbic7XG5pbXBvcnQgZ2V0QW5pbWF0aW9uU3RlcCBmcm9tICd1dGlscy9nZXRBbmltYXRpb25TdGVwJztcblxuaW1wb3J0IENhcmRTdGFjayBmcm9tICcuL2NhcmRTdGFjayc7XG5cbmNvbnN0IFRPUF9TQ09SRSA9IDIxO1xuXG5jbGFzcyBIYW5kIGV4dGVuZHMgQ2FyZFN0YWNrIHtcbiAgYXN5bmMgZHJhZyhzaG91bGRTaG93RmFjZT86IGJvb2xlYW4pIHtcbiAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMudG9wQ2FyZC5nZXRUcmFuc2Zvcm0oKTtcbiAgICBjb25zdCBkeCA9XG4gICAgICAodGhpcy5jb3VudCA9PT0gMyA/IDAgOiB0aGlzLmNvdW50IC0gMykgKiB0aGlzLnRvcENhcmQuZ2V0UmVjdCgpLndpZHRoO1xuXG4gICAgYXdhaXQgYW5pbWF0ZShbXG4gICAgICBjcmVhdGVBbmltYXRpb24oe1xuICAgICAgICBkdXJhdGlvbjogNDAwLFxuICAgICAgICBvblByb2dyZXNzOiAocHIpID0+IHtcbiAgICAgICAgICB0aGlzLnRvcENhcmQuc2V0VHJhbnNmb3JtKFxuICAgICAgICAgICAgZ2V0QW5pbWF0aW9uU3RlcCh4LCBkeCwgcHIpLFxuICAgICAgICAgICAgZ2V0QW5pbWF0aW9uU3RlcCh5LCAwLCBwcilcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgICBvbkVuZDogKCkgPT4ge1xuICAgICAgICAgIGlmIChzaG91bGRTaG93RmFjZSkge1xuICAgICAgICAgICAgdGhpcy50b3BDYXJkLnNob3coKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICBdKTtcbiAgfVxuXG4gIGVtcHR5KCkge1xuICAgIHRoaXMuY2FyZHMgPSBbXTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0U2NvcmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FyZHMucmVkdWNlKFxuICAgICAgKHNjb3JlLCB7IHJhbmsgfSwgaW5kZXgpID0+IHNjb3JlICsgcmFua1ZhbHVlLmdldChyYW5rKShzY29yZSwgaW5kZXgpLFxuICAgICAgMFxuICAgICk7XG4gIH1cblxuICBoYXNCbGFja2phY2soKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2NvcmUoKSA9PT0gVE9QX1NDT1JFICYmIHRoaXMuY291bnQgPT09IDI7XG4gIH1cblxuICBoYXNCdXN0KCkge1xuICAgIHJldHVybiB0aGlzLmdldFNjb3JlKCkgPiBUT1BfU0NPUkU7XG4gIH1cblxuICBnZXQgaGFzQ2FyZHNMaW1pdCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudCA9PT0gNTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBIYW5kO1xuIiwiaW1wb3J0IEhhbmQgZnJvbSAnLi9oYW5kJztcblxuY2xhc3MgRGVhbGVyIGV4dGVuZHMgSGFuZCB7XG4gIHJldmVhbFRvcENhcmQoKSB7XG4gICAgdGhpcy50b3BDYXJkPy5zaG93KCk7XG4gIH1cblxuICBjYW5EcmF3Q2FyZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTY29yZSgpIDwgMTc7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGVhbGVyO1xuIiwiaW1wb3J0IFJhbmsgZnJvbSAnY29uc3RhbnRzL3JhbmtzJztcbmltcG9ydCBTdWl0IGZyb20gJ2NvbnN0YW50cy9zdWl0cyc7XG5pbXBvcnQgZ2V0VHJhbnNmb3JtVmFsdWUgZnJvbSAndXRpbHMvZ2V0VHJhbnNmb3JtVmFsdWUnO1xuXG5jbGFzcyBDYXJkIHtcbiAgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIHJhbms6IFJhbms7XG5cbiAgcHJpdmF0ZSBiYWNrQ2xhc3NOYW1lID0gJ2NhcmQgYmFjayc7XG5cbiAgcHJpdmF0ZSBmYWNlQ2xhc3NOYW1lOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IocmFuazogUmFuaywgc3VpdDogU3VpdCwgaW5kZXggPSAwKSB7XG4gICAgdGhpcy5yYW5rID0gcmFuaztcblxuICAgIGNvbnN0IG9mZnNldCA9IC1pbmRleCAvIDQ7XG5cbiAgICB0aGlzLnNldFRyYW5zZm9ybShvZmZzZXQsIG9mZnNldCkuZm9yZWdyb3VuZCA9IGluZGV4O1xuXG4gICAgdGhpcy5mYWNlQ2xhc3NOYW1lID0gYGNhcmQgJHtyYW5rfS1vZi0ke3N1aXR9YDtcbiAgICB0aGlzLmNsYXNzTmFtZSA9IHRoaXMuYmFja0NsYXNzTmFtZTtcbiAgfVxuXG4gIHNob3coKSB7XG4gICAgdGhpcy5jbGFzc05hbWUgPSB0aGlzLmZhY2VDbGFzc05hbWU7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgdGhpcy5jbGFzc05hbWUgPSB0aGlzLmJhY2tDbGFzc05hbWU7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNldFRyYW5zZm9ybSh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgIHRoaXMuc3R5bGVzLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHt4fXB4LCAke3l9cHgpYDtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0VHJhbnNmb3JtKCkge1xuICAgIHJldHVybiBnZXRUcmFuc2Zvcm1WYWx1ZSh0aGlzLmVsZW0pO1xuICB9XG5cbiAgZ2V0UmVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXQgY2xhc3NOYW1lKGNsYXNzTmFtZTogc3RyaW5nKSB7XG4gICAgdGhpcy5lbGVtLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgfVxuXG4gIHNldCBmb3JlZ3JvdW5kKHpJbmRleDogbnVtYmVyKSB7XG4gICAgdGhpcy5zdHlsZXMuekluZGV4ID0gekluZGV4LnRvU3RyaW5nKCk7XG4gIH1cblxuICBzZXQgb3BhY2l0eShvcGFjaXR5OiBudW1iZXIpIHtcbiAgICB0aGlzLnN0eWxlcy5vcGFjaXR5ID0gb3BhY2l0eS50b1N0cmluZygpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgc3R5bGVzKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW0uc3R5bGU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNvbnN0IGdldFRyYW5zZm9ybVZhbHVlID0gKGVsZW06IEhUTUxFbGVtZW50KSA9PiB7XG4gIGNvbnN0IFssICwgLCAsIHgsIHldID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKVxuICAgIC50cmFuc2Zvcm0ucmVwbGFjZSgvW15cXGRcXC0uLF0vZywgJycpXG4gICAgLnNwbGl0KCcsJyk7XG5cbiAgcmV0dXJuIHsgeDogTnVtYmVyKHgpIHx8IDAsIHk6IE51bWJlcih5KSB8fCAwIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBnZXRUcmFuc2Zvcm1WYWx1ZTtcbiIsImltcG9ydCBDYXJkIGZyb20gJ2NhcmQnO1xuaW1wb3J0IFJhbmsgZnJvbSAnY29uc3RhbnRzL3JhbmtzJztcbmltcG9ydCBTdWl0IGZyb20gJ2NvbnN0YW50cy9zdWl0cyc7XG5pbXBvcnQgYW5pbWF0ZSBmcm9tICd1dGlscy9hbmltYXRlJztcbmltcG9ydCBjcmVhdGVBbmltYXRpb24gZnJvbSAndXRpbHMvY3JlYXRlQW5pbWF0aW9uJztcbmltcG9ydCBnZXRBbmltYXRpb25TdGVwIGZyb20gJ3V0aWxzL2dldEFuaW1hdGlvblN0ZXAnO1xuXG5pbXBvcnQgQ2FyZFN0YWNrIGZyb20gJy4vY2FyZFN0YWNrJztcblxuY2xhc3MgRGVjayBleHRlbmRzIENhcmRTdGFjayB7XG4gIGNvbnN0cnVjdG9yKGVsZW06IEhUTUxEaXZFbGVtZW50LCBzdWl0czogU3VpdFtdLCByYW5rczogUmFua1tdKSB7XG4gICAgc3VwZXIoZWxlbSk7XG5cbiAgICBzdWl0cy5mb3JFYWNoKChzdWl0KSA9PiB7XG4gICAgICByYW5rcy5mb3JFYWNoKChyYW5rKSA9PiB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IC10aGlzLmNvdW50IC8gNDtcbiAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHJhbmssIHN1aXQsIHRoaXMuY291bnQpXG4gICAgICAgICAgLnNob3coKVxuICAgICAgICAgIC5zZXRUcmFuc2Zvcm0ob2Zmc2V0LCAtMjAwICsgb2Zmc2V0KTtcblxuICAgICAgICBjYXJkLm9wYWNpdHkgPSAwO1xuXG4gICAgICAgIHRoaXMucHVzaChjYXJkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgaW50cm8oKSB7XG4gICAgYXdhaXQgYW5pbWF0ZShcbiAgICAgIHRoaXMuY2FyZHMubWFwKChjYXJkLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IGNhcmQuZ2V0VHJhbnNmb3JtKCk7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IC1pbmRleCAvIDQ7XG5cbiAgICAgICAgcmV0dXJuIGNyZWF0ZUFuaW1hdGlvbih7XG4gICAgICAgICAgZGVsYXk6IGluZGV4ICogOCxcbiAgICAgICAgICBkdXJhdGlvbjogNjAwLFxuICAgICAgICAgIG9uUHJvZ3Jlc3M6IChwcikgPT4ge1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbiAgICAgICAgICAgIGNhcmQuc2V0VHJhbnNmb3JtKFxuICAgICAgICAgICAgICBnZXRBbmltYXRpb25TdGVwKHgsIG9mZnNldCwgcHIpLFxuICAgICAgICAgICAgICBnZXRBbmltYXRpb25TdGVwKHksIG9mZnNldCwgcHIpXG4gICAgICAgICAgICApLm9wYWNpdHkgPSBnZXRBbmltYXRpb25TdGVwKDAsIDEsIHByKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uRW5kOiAoKSA9PiB7XG4gICAgICAgICAgICBjYXJkLmhpZGUoKTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHNodWZmbGUoKSB7XG4gICAgZm9yIChsZXQgbGFzdEluZGV4ID0gdGhpcy5jb3VudCAtIDE7IGxhc3RJbmRleDsgbGFzdEluZGV4IC09IDEpIHtcbiAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGxhc3RJbmRleCArIDEpKTtcblxuICAgICAgW3RoaXMuY2FyZHNbbGFzdEluZGV4XSwgdGhpcy5jYXJkc1tyYW5kb21JbmRleF1dID0gW1xuICAgICAgICB0aGlzLmNhcmRzW3JhbmRvbUluZGV4XSxcbiAgICAgICAgdGhpcy5jYXJkc1tsYXN0SW5kZXhdLFxuICAgICAgXTtcbiAgICB9XG5cbiAgICBhd2FpdCBhbmltYXRlKFxuICAgICAgdGhpcy5jYXJkcy5yZWR1Y2UoKGFuaW1hdGlvbnMsIGNhcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gaW5kZXggKiAyO1xuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IDIwMDtcbiAgICAgICAgY29uc3QgeyB4LCB5IH0gPSBjYXJkLmdldFRyYW5zZm9ybSgpO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSAtaW5kZXggLyA0O1xuICAgICAgICBjb25zdCByYW5kb21PZmZzZXQgPVxuICAgICAgICAgIChNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpICogMiAtIDEpICpcbiAgICAgICAgICAoKE1hdGgucmFuZG9tKCkgKiBjYXJkLmdldFJlY3QoKS53aWR0aCkgLyAyICsgMzApO1xuXG4gICAgICAgIGFuaW1hdGlvbnMucHVzaChcbiAgICAgICAgICBjcmVhdGVBbmltYXRpb24oe1xuICAgICAgICAgICAgZGVsYXksXG4gICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IChwcikgPT4ge1xuICAgICAgICAgICAgICBjYXJkLnNldFRyYW5zZm9ybShcbiAgICAgICAgICAgICAgICBnZXRBbmltYXRpb25TdGVwKHgsIHJhbmRvbU9mZnNldCwgcHIpLFxuICAgICAgICAgICAgICAgIGdldEFuaW1hdGlvblN0ZXAoeSwgb2Zmc2V0LCBwcilcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgICAgY3JlYXRlQW5pbWF0aW9uKHtcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgZGVsYXk6IGRlbGF5ICsgZHVyYXRpb24sXG4gICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7XG4gICAgICAgICAgICAgIGNhcmQuZm9yZWdyb3VuZCA9IGluZGV4O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IChwcikgPT4ge1xuICAgICAgICAgICAgICBjYXJkLnNldFRyYW5zZm9ybShcbiAgICAgICAgICAgICAgICBnZXRBbmltYXRpb25TdGVwKHJhbmRvbU9mZnNldCwgb2Zmc2V0LCBwciksXG4gICAgICAgICAgICAgICAgb2Zmc2V0XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbnM7XG4gICAgICB9LCBbXSlcbiAgICApO1xuICB9XG5cbiAgZ2V0T2Zmc2V0VG9wKCkge1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5nZXRSZWN0KCk7XG4gICAgY29uc3QgeyB4OiBkeCwgeTogZHkgfSA9IHRoaXMudG9wQ2FyZC5nZXRUcmFuc2Zvcm0oKTtcblxuICAgIHJldHVybiB7IHg6IHggKyBkeCwgeTogeSArIGR5IH07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGVjaztcbiIsImltcG9ydCBhbmltYXRlIGZyb20gJ3V0aWxzL2FuaW1hdGUnO1xuaW1wb3J0IGNyZWF0ZUFuaW1hdGlvbiBmcm9tICd1dGlscy9jcmVhdGVBbmltYXRpb24nO1xuaW1wb3J0IGdldEFuaW1hdGlvblN0ZXAgZnJvbSAndXRpbHMvZ2V0QW5pbWF0aW9uU3RlcCc7XG5cbmNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtOiBIVE1MRGl2RWxlbWVudCkge31cblxuICBzaG93KHRleHQ6IHN0cmluZykge1xuICAgIGFuaW1hdGUoW1xuICAgICAgY3JlYXRlQW5pbWF0aW9uKHtcbiAgICAgICAgZHVyYXRpb246IDEwMCxcbiAgICAgICAgb25TdGFydDogKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZWxlbS50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUHJvZ3Jlc3M6IChwcm9ncmVzcykgPT4ge1xuICAgICAgICAgIHRoaXMub3BhY2l0eSA9IGdldEFuaW1hdGlvblN0ZXAoMCwgMSwgcHJvZ3Jlc3MpO1xuICAgICAgICB9LFxuICAgICAgICBvbkVuZDogKCkgPT4ge1xuICAgICAgICAgIHRoaXMub3BhY2l0eSA9ICcnO1xuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgXSk7XG4gIH1cblxuICBoaWRlKCkge1xuICAgIGlmICh0aGlzLnN0eWxlcy5vcGFjaXR5ICE9PSAnMCcpIHtcbiAgICAgIGFuaW1hdGUoW1xuICAgICAgICBjcmVhdGVBbmltYXRpb24oe1xuICAgICAgICAgIGR1cmF0aW9uOiAyMDAsXG4gICAgICAgICAgb25Qcm9ncmVzczogKHByb2dyZXNzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9wYWNpdHkgPSBnZXRBbmltYXRpb25TdGVwKDEsIDAsIHByb2dyZXNzKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uRW5kOiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9wYWNpdHkgPSAwO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgXSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXQgc3R5bGVzKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW0uc3R5bGU7XG4gIH1cblxuICBwcml2YXRlIHNldCBvcGFjaXR5KG9wYWNpdHk6IG51bWJlciB8IHN0cmluZykge1xuICAgIHRoaXMuc3R5bGVzLm9wYWNpdHkgPSBvcGFjaXR5LnRvU3RyaW5nKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgJ3N0eWxlcy9pbmRleC5zY3NzJztcblxuaW1wb3J0IEJsYWNramFjayBmcm9tICdibGFja2phY2snO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdidXR0b25zL2J1dHRvbic7XG5pbXBvcnQgQnV0dG9ucyBmcm9tICdidXR0b25zL2J1dHRvbnMnO1xuaW1wb3J0IERlYWxlciBmcm9tICdjYXJkSG9sZGVycy9kZWFsZXInO1xuaW1wb3J0IERlY2sgZnJvbSAnY2FyZEhvbGRlcnMvZGVjayc7XG5pbXBvcnQgSGFuZCBmcm9tICdjYXJkSG9sZGVycy9oYW5kJztcbmltcG9ydCB7IHJhbmtzIH0gZnJvbSAnY29uc3RhbnRzL3JhbmtzJztcbmltcG9ydCB7IHN1aXRzIH0gZnJvbSAnY29uc3RhbnRzL3N1aXRzJztcbmltcG9ydCBQb3B1cCBmcm9tICdwb3B1cCc7XG5cbmNvbnN0IGdldEVsZW0gPSA8VCBleHRlbmRzIEhUTUxFbGVtZW50PihpZDogc3RyaW5nKSA9PlxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgYXMgVDtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ld1xubmV3IEJsYWNramFjayhcbiAgbmV3IEJ1dHRvbnMoXG4gICAgbmV3IEJ1dHRvbihnZXRFbGVtPEhUTUxCdXR0b25FbGVtZW50PignZGVhbC1idG4nKSksXG4gICAgbmV3IEJ1dHRvbihnZXRFbGVtPEhUTUxCdXR0b25FbGVtZW50PigncmVzZXQtYnRuJykpLFxuICAgIG5ldyBCdXR0b24oZ2V0RWxlbTxIVE1MQnV0dG9uRWxlbWVudD4oJ2hpdC1idG4nKSksXG4gICAgbmV3IEJ1dHRvbihnZXRFbGVtPEhUTUxCdXR0b25FbGVtZW50Pignc3RhbmQtYnRuJykpXG4gICksXG4gIG5ldyBQb3B1cChnZXRFbGVtPEhUTUxEaXZFbGVtZW50PigncG9wdXAnKSksXG4gIG5ldyBEZWNrKGdldEVsZW08SFRNTERpdkVsZW1lbnQ+KCdkZWNrJyksIHN1aXRzLCByYW5rcyksXG4gIG5ldyBEZWFsZXIoZ2V0RWxlbTxIVE1MRGl2RWxlbWVudD4oJ2RlYWxlcicpKSxcbiAgbmV3IEhhbmQoZ2V0RWxlbTxIVE1MRGl2RWxlbWVudD4oJ3BsYXllcicpKVxuKTtcbiIsIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zaGFkb3dcbmNvbnN0IGVudW0gU3VpdCB7XG4gIENsdWJzID0gJ2NsdWJzJyxcbiAgU3BhZGVzID0gJ3NwYWRlcycsXG4gIEhlYXJ0cyA9ICdoZWFydHMnLFxuICBEaWFtb25kcyA9ICdkaWFtb25kcycsXG59XG5cbmV4cG9ydCBjb25zdCBzdWl0cyA9IFtTdWl0LkNsdWJzLCBTdWl0LlNwYWRlcywgU3VpdC5IZWFydHMsIFN1aXQuRGlhbW9uZHNdO1xuXG5leHBvcnQgZGVmYXVsdCBTdWl0O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==